{"version":3,"file":"xmb-merge.spec.js","sourceRoot":"","sources":["../../../../projects/xliffmerge/src/xliffmerge/xmb-merge.spec.ts"],"names":[],"mappings":"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","sourcesContent":["import * as fs from 'fs';\r\nimport {XliffMerge} from './xliff-merge';\r\nimport {IConfigFile} from './i-xliff-merge-options';\r\nimport {CommandOutput} from '../common/command-output';\r\nimport {WriterToString} from '../common/writer-to-string';\r\nimport {FileUtil} from '../common/file-util';\r\nimport {ITranslationMessagesFile, ITransUnit, STATE_NEW} from '@ngx-i18nsupport/ngx-i18nsupport-lib';\r\nimport {TranslationMessagesFileReader} from './translation-messages-file-reader';\r\nimport {XmlReader} from './xml-reader';\r\n\r\n/**\r\n * Created by martin on 18.02.2017.\r\n * Testcases for XliffMerge Format XMB.\r\n */\r\n\r\ndescribe('XliffMerge XMB format tests', () => {\r\n\r\n    /**\r\n     * Workdir, not in git.\r\n     * Cleaned up for every test.\r\n     * Tests, that work on files, copy everything they need into this directory.\r\n     */\r\n    const WORKDIR = 'test/work/';\r\n    const SRCDIR = 'test/testdata/i18n/';\r\n\r\n    const ENCODING = 'UTF-8';\r\n\r\n    /**\r\n     * Helper function to read Xmb from File\r\n     */\r\n    function readXmb(path: string): ITranslationMessagesFile {\r\n        return TranslationMessagesFileReader.fromFile('xmb', path, ENCODING);\r\n    }\r\n\r\n    /**\r\n     * Helper function to read Xtb from 2 Files, the xtb and the master xmb file\r\n     */\r\n    function readXtbWithMaster(path: string, masterPath?: string): ITranslationMessagesFile {\r\n        return TranslationMessagesFileReader.fromFile('xtb', path, ENCODING, masterPath);\r\n    }\r\n\r\n    describe('Merge process checks for format xmb', () => {\r\n\r\n        const MASTER1FILE = 'ngExtractedMaster1.xmb';\r\n        const MASTER2FILE = 'ngExtractedMaster2.xmb';\r\n        const MASTER1SRC = SRCDIR + MASTER1FILE;\r\n        const MASTER2SRC = SRCDIR + MASTER2FILE;\r\n        const MASTERFILE = 'messages.xmb';\r\n        const MASTER = WORKDIR + MASTERFILE;\r\n\r\n        const ID_TRANSLATED_MYFIRST = '2047558209369508311'; // an ID from ngExtractedMaster1.xlf\r\n        const ID_REMOVED_DESCRIPTION = '7499557905529977371'; // an ID that will be removed in master2\r\n        const ID_REMOVED_DESCRIPTION2 = '3274258156935474372'; // another removed ID\r\n        const ID_ADDED = '8998006760999956868';  // an ID that will be added in master2\r\n        const ID_WITH_PLACEHOLDER = '9030312858648510700';\r\n\r\n        beforeEach(() => {\r\n            if (!fs.existsSync(WORKDIR)) {\r\n                fs.mkdirSync(WORKDIR);\r\n            }\r\n            // cleanup workdir\r\n            FileUtil.deleteFolderContentRecursive(WORKDIR);\r\n        });\r\n\r\n        it('should generate translated file for default language de from xmb master', (done) => {\r\n            FileUtil.copy(MASTER1SRC, MASTER);\r\n            const ws: WriterToString = new WriterToString();\r\n            const commandOut = new CommandOutput(ws);\r\n            const profileContent: IConfigFile = {\r\n                xliffmergeOptions: {\r\n                    defaultLanguage: 'de',\r\n                    srcDir: WORKDIR,\r\n                    genDir: WORKDIR,\r\n                    i18nFile: MASTERFILE,\r\n                    i18nFormat: 'xmb'\r\n                }\r\n            };\r\n            const xliffMergeCmd = XliffMerge.createFromOptions(commandOut, {languages: ['de']}, profileContent);\r\n            xliffMergeCmd.run();\r\n            expect(ws.writtenData()).not.toContain('ERROR');\r\n            const langFile: ITranslationMessagesFile = readXtbWithMaster(xliffMergeCmd.generatedI18nFile('de'), MASTER);\r\n            expect(langFile.sourceLanguage()).toBeFalsy(); // not supported in xmb\r\n            expect(langFile.targetLanguage()).toBe('de');\r\n            langFile.forEachTransUnit((tu: ITransUnit) => {\r\n                expect(tu.targetContent()).toBe(tu.sourceContent());\r\n                expect(tu.targetState()).toBe(STATE_NEW);\r\n            });\r\n            done();\r\n        });\r\n\r\n        it('should generate translated file for all languages using format xmb', (done) => {\r\n            FileUtil.copy(MASTER1SRC, MASTER);\r\n            const ws: WriterToString = new WriterToString();\r\n            const commandOut = new CommandOutput(ws);\r\n            const profileContent: IConfigFile = {\r\n                xliffmergeOptions: {\r\n                    defaultLanguage: 'de',\r\n                    srcDir: WORKDIR,\r\n                    genDir: WORKDIR,\r\n                    i18nFile: MASTERFILE,\r\n                    i18nFormat: 'xmb'\r\n                }\r\n            };\r\n            const xliffMergeCmd = XliffMerge.createFromOptions(commandOut, {languages: ['de', 'en']}, profileContent);\r\n            xliffMergeCmd.run();\r\n            expect(ws.writtenData()).not.toContain('ERROR');\r\n            const langFileGerman: ITranslationMessagesFile = readXtbWithMaster(xliffMergeCmd.generatedI18nFile('de'), MASTER);\r\n            langFileGerman.forEachTransUnit((tu: ITransUnit) => {\r\n                expect(tu.targetContent()).toBe(tu.sourceContent());\r\n            });\r\n            const langFileEnglish: ITranslationMessagesFile = readXtbWithMaster(xliffMergeCmd.generatedI18nFile('en'), MASTER);\r\n            langFileEnglish.forEachTransUnit((tu: ITransUnit) => {\r\n                expect(tu.targetContent()).toBe(tu.sourceContent());\r\n            });\r\n            done();\r\n        });\r\n\r\n        it('should generate translated file for all languages with empty targets for non default languages', (done) => {\r\n            FileUtil.copy(MASTER1SRC, MASTER);\r\n            const ws: WriterToString = new WriterToString();\r\n            const commandOut = new CommandOutput(ws);\r\n            const profileContent: IConfigFile = {\r\n                xliffmergeOptions: {\r\n                    defaultLanguage: 'de',\r\n                    srcDir: WORKDIR,\r\n                    genDir: WORKDIR,\r\n                    i18nFile: MASTERFILE,\r\n                    i18nFormat: 'xmb',\r\n                    useSourceAsTarget: false\r\n                }\r\n            };\r\n            const xliffMergeCmd = XliffMerge.createFromOptions(commandOut, {languages: ['de', 'en']}, profileContent);\r\n            xliffMergeCmd.run();\r\n            expect(ws.writtenData()).not.toContain('ERROR');\r\n            const langFileGerman: ITranslationMessagesFile = readXtbWithMaster(xliffMergeCmd.generatedI18nFile('de'), MASTER);\r\n            langFileGerman.forEachTransUnit((tu: ITransUnit) => {\r\n                // useSourceAsTarget = false, but this is the default language which will always contain translation!\r\n                expect(tu.targetContent()).toBe(tu.sourceContent());\r\n            });\r\n            const langFileEnglish: ITranslationMessagesFile = readXtbWithMaster(xliffMergeCmd.generatedI18nFile('en'), MASTER);\r\n            langFileEnglish.forEachTransUnit((tu: ITransUnit) => {\r\n                // since useSourceAsTarget = false, there should be no translation!\r\n                expect(tu.targetContent()).toBe('');\r\n                expect(tu.targetState()).toBe('new');\r\n            });\r\n            done();\r\n        });\r\n\r\n        it('should generate translated file for all languages with set praefix and suffix (#70)', (done) => {\r\n            FileUtil.copy(MASTER1SRC, MASTER);\r\n            const ws: WriterToString = new WriterToString();\r\n            const commandOut = new CommandOutput(ws);\r\n            const profileContent: IConfigFile = {\r\n                xliffmergeOptions: {\r\n                    defaultLanguage: 'de',\r\n                    srcDir: WORKDIR,\r\n                    genDir: WORKDIR,\r\n                    i18nFormat: 'xmb',\r\n                    i18nFile: MASTERFILE,\r\n                    targetPraefix: '%%',\r\n                    targetSuffix: '!!',\r\n                }\r\n            };\r\n            const xliffMergeCmd = XliffMerge.createFromOptions(commandOut, {languages: ['de', 'en']}, profileContent);\r\n            xliffMergeCmd.run();\r\n            expect(ws.writtenData()).not.toContain('ERROR');\r\n            const langFileGerman: ITranslationMessagesFile = readXtbWithMaster(xliffMergeCmd.generatedI18nFile('de'), MASTER);\r\n            langFileGerman.forEachTransUnit((tu: ITransUnit) => {\r\n                if (!tu.targetContent().startsWith('{VAR')) {\r\n                    expect(tu.targetContent()).toBe('%%' + tu.sourceContent() + '!!');\r\n                } else {\r\n                    expect(tu.targetContent()).toBe(tu.sourceContent());\r\n                }\r\n            });\r\n            const langFileEnglish: ITranslationMessagesFile = readXtbWithMaster(xliffMergeCmd.generatedI18nFile('en'), MASTER);\r\n            langFileEnglish.forEachTransUnit((tu: ITransUnit) => {\r\n                if (!tu.targetContent().startsWith('{VAR')) {\r\n                    expect(tu.targetContent()).toBe('%%' + tu.sourceContent() + '!!');\r\n                } else {\r\n                    expect(tu.targetContent()).toBe(tu.sourceContent());\r\n                }\r\n            });\r\n            done();\r\n        });\r\n\r\n        it('should merge translated file for all languages using format xmb', (done) => {\r\n            FileUtil.copy(MASTER1SRC, MASTER);\r\n            let ws: WriterToString = new WriterToString();\r\n            let commandOut = new CommandOutput(ws);\r\n            const profileContent: IConfigFile = {\r\n                xliffmergeOptions: {\r\n                    defaultLanguage: 'de',\r\n                    srcDir: WORKDIR,\r\n                    genDir: WORKDIR,\r\n                    i18nFile: MASTERFILE,\r\n                    i18nFormat: 'xmb'\r\n                }\r\n            };\r\n            let xliffMergeCmd = XliffMerge.createFromOptions(commandOut, {languages: ['de', 'en']}, profileContent);\r\n            xliffMergeCmd.run();\r\n            expect(ws.writtenData()).not.toContain('ERROR');\r\n\r\n            // now translate some texts in the English version\r\n            let langFileEnglish: ITranslationMessagesFile = readXtbWithMaster(xliffMergeCmd.generatedI18nFile('en'), MASTER);\r\n            const tu: ITransUnit = langFileEnglish.transUnitWithId(ID_TRANSLATED_MYFIRST);\r\n            expect(tu).toBeTruthy();\r\n            tu.translate('My first app');\r\n            TranslationMessagesFileReader.save(langFileEnglish);\r\n\r\n            // next step, use another master\r\n            FileUtil.copy(MASTER2SRC, MASTER);\r\n            ws = new WriterToString();\r\n            commandOut = new CommandOutput(ws);\r\n            xliffMergeCmd = XliffMerge.createFromOptions(commandOut, {languages: ['de', 'en']}, profileContent);\r\n            xliffMergeCmd.run();\r\n            expect(ws.writtenData()).not.toContain('ERROR');\r\n            expect(ws.writtenData()).toContain('merged 1 trans-units from master to \"en\"');\r\n            expect(ws.writtenData()).toContain('removed 2 unused trans-units in \"en\"');\r\n            expect(ws.writtenData()).not.toContain('WARNING: transferred');\r\n\r\n            // look, that the new file contains the old translation\r\n            langFileEnglish = readXtbWithMaster(xliffMergeCmd.generatedI18nFile('en'), MASTER);\r\n            expect(langFileEnglish.transUnitWithId(ID_TRANSLATED_MYFIRST).targetContent()).toBe('My first app');\r\n\r\n            // look, that the new file contains the new translation\r\n            expect(langFileEnglish.transUnitWithId(ID_ADDED)).toBeTruthy();\r\n\r\n            // look, that the removed IDs are really removed.\r\n            expect(langFileEnglish.transUnitWithId(ID_REMOVED_DESCRIPTION)).toBeFalsy();\r\n            expect(langFileEnglish.transUnitWithId(ID_REMOVED_DESCRIPTION2)).toBeFalsy();\r\n            done();\r\n        });\r\n\r\n        it('should preserve order when merging new units (#96)', (done) => {\r\n            FileUtil.copy(SRCDIR + 'preserveOrderMaster1.xmb', MASTER);\r\n            let ws: WriterToString = new WriterToString();\r\n            let commandOut = new CommandOutput(ws);\r\n            const profileContent: IConfigFile = {\r\n                xliffmergeOptions: {\r\n                    defaultLanguage: 'en',\r\n                    srcDir: WORKDIR,\r\n                    genDir: WORKDIR,\r\n                    i18nFormat: 'xmb',\r\n                    i18nFile: MASTERFILE\r\n                }\r\n            };\r\n            let xliffMergeCmd = XliffMerge.createFromOptions(commandOut, {languages: ['en', 'de']}, profileContent);\r\n            xliffMergeCmd.run();\r\n            expect(ws.writtenData()).not.toContain('ERROR');\r\n\r\n            // next step, use new master that has added 3 units\r\n            FileUtil.copy(SRCDIR + 'preserveOrderMaster2.xmb', MASTER);\r\n            ws = new WriterToString();\r\n            commandOut = new CommandOutput(ws);\r\n            xliffMergeCmd = XliffMerge.createFromOptions(commandOut, {languages: ['en', 'de']}, profileContent);\r\n            xliffMergeCmd.run();\r\n            expect(ws.writtenData()).not.toContain('ERROR');\r\n            expect(ws.writtenData()).toContain('merged 3 trans-units from master to \"de\"');\r\n\r\n            // look, that the new file contains the new units at the correct position\r\n            const langFileGerman = readXtbWithMaster(xliffMergeCmd.generatedI18nFile('de'));\r\n            const addedTu = langFileGerman.transUnitWithId('addedunit1');\r\n            expect(addedTu).toBeTruthy();\r\n            expect(addedTu.targetContent()).toBe('added unit 1');\r\n            // check position\r\n            expect(langFileGerman.editedContent().replace(/(\\r\\n|\\n|\\r)/gm, ''))\r\n                .toMatch(/addedunit1.*firstunit.*addedunit2.*lastunit.*addedunit3/);\r\n            done();\r\n        });\r\n\r\n        it('should not preserve order when merging new units when disabled via config (#108)', (done) => {\r\n            FileUtil.copy(SRCDIR + 'preserveOrderMaster1.xmb', MASTER);\r\n            let ws: WriterToString = new WriterToString();\r\n            let commandOut = new CommandOutput(ws);\r\n            const profileContent: IConfigFile = {\r\n                xliffmergeOptions: {\r\n                    defaultLanguage: 'en',\r\n                    srcDir: WORKDIR,\r\n                    genDir: WORKDIR,\r\n                    i18nFormat: 'xmb',\r\n                    i18nFile: MASTERFILE,\r\n                    preserveOrder: false\r\n                }\r\n            };\r\n            let xliffMergeCmd = XliffMerge.createFromOptions(commandOut, {languages: ['en', 'de']}, profileContent);\r\n            xliffMergeCmd.run();\r\n            expect(ws.writtenData()).not.toContain('ERROR');\r\n\r\n            // next step, use new master that has added 3 units\r\n            FileUtil.copy(SRCDIR + 'preserveOrderMaster2.xmb', MASTER);\r\n            ws = new WriterToString();\r\n            commandOut = new CommandOutput(ws);\r\n            xliffMergeCmd = XliffMerge.createFromOptions(commandOut, {languages: ['en', 'de']}, profileContent);\r\n            xliffMergeCmd.run();\r\n            expect(ws.writtenData()).not.toContain('ERROR');\r\n            expect(ws.writtenData()).toContain('merged 3 trans-units from master to \"de\"');\r\n\r\n            // look, that the new file contains the new units at the correct position\r\n            const langFileGerman = readXtbWithMaster(xliffMergeCmd.generatedI18nFile('de'));\r\n            const addedTu = langFileGerman.transUnitWithId('addedunit1');\r\n            expect(addedTu).toBeTruthy();\r\n            expect(addedTu.targetContent()).toBe('added unit 1');\r\n            // check position, new units should be at end!\r\n            expect(langFileGerman.editedContent().replace(/(\\r\\n|\\n|\\r)/gm, ''))\r\n                .toMatch(/firstunit.*lastunit.*addedunit1.*addedunit2.*addedunit3/);\r\n            done();\r\n        });\r\n\r\n        it('should not remove trailing line break when merging', (done) => {\r\n            FileUtil.copy(MASTER1SRC, MASTER);\r\n            const masterContent = FileUtil.read(MASTER, XmlReader.DEFAULT_ENCODING);\r\n            expect(masterContent.endsWith('\\n')).toBeTruthy('master file should end with EOL');\r\n            const ws: WriterToString = new WriterToString();\r\n            const commandOut = new CommandOutput(ws);\r\n            const profileContent: IConfigFile = {\r\n                xliffmergeOptions: {\r\n                    defaultLanguage: 'de',\r\n                    srcDir: WORKDIR,\r\n                    genDir: WORKDIR,\r\n                    i18nFormat: 'xmb',\r\n                    i18nFile: MASTERFILE\r\n                }\r\n            };\r\n            const xliffMergeCmd = XliffMerge.createFromOptions(commandOut, {languages: ['de', 'en']}, profileContent);\r\n            xliffMergeCmd.run();\r\n            expect(ws.writtenData()).not.toContain('ERROR');\r\n            const newContent = FileUtil.read(xliffMergeCmd.generatedI18nFile('de'), XmlReader.DEFAULT_ENCODING);\r\n            expect(newContent.endsWith('\\n')).toBeTruthy('file should end with EOL');\r\n            done();\r\n        });\r\n\r\n        // noinspection TsLint\r\n        it('should translate messages with placeholder in format xmb', (done) => {\r\n            FileUtil.copy(MASTER2SRC, MASTER);\r\n            const ws: WriterToString = new WriterToString();\r\n            const commandOut = new CommandOutput(ws);\r\n            const profileContent: IConfigFile = {\r\n                xliffmergeOptions: {\r\n                    defaultLanguage: 'de',\r\n                    srcDir: WORKDIR,\r\n                    genDir: WORKDIR,\r\n                    i18nFile: MASTERFILE,\r\n                    i18nFormat: 'xmb'\r\n                }\r\n            };\r\n            const xliffMergeCmd = XliffMerge.createFromOptions(commandOut, {languages: ['de', 'en']}, profileContent);\r\n            xliffMergeCmd.run();\r\n            expect(ws.writtenData()).not.toContain('ERROR');\r\n\r\n            // now translate some texts in the English version\r\n            let langFileEnglish: ITranslationMessagesFile = readXtbWithMaster(xliffMergeCmd.generatedI18nFile('en'), MASTER);\r\n            const tu: ITransUnit = langFileEnglish.transUnitWithId(ID_WITH_PLACEHOLDER);\r\n            expect(tu).toBeTruthy();\r\n            tu.translate('Item <ph name=\"INTERPOLATION\"><ex>INTERPOLATION</ex></ph> of <ph name=\"INTERPOLATION_1\"><ex>INTERPOLATION_1</ex></ph> added.');\r\n            TranslationMessagesFileReader.save(langFileEnglish);\r\n\r\n            // look, that the new file contains the translation\r\n            langFileEnglish = readXtbWithMaster(xliffMergeCmd.generatedI18nFile('en'), MASTER);\r\n            // noinspection TsLint\r\n            expect(langFileEnglish.transUnitWithId(ID_WITH_PLACEHOLDER).targetContent())\r\n                .toBe('Item <ph name=\"INTERPOLATION\"><ex>INTERPOLATION</ex></ph> of <ph name=\"INTERPOLATION_1\"><ex>INTERPOLATION_1</ex></ph> added.');\r\n\r\n            done();\r\n        });\r\n\r\n        it('should return status new for all trans units using format xmb with master file', (done) => {\r\n            FileUtil.copy(MASTER1SRC, MASTER);\r\n            const ws: WriterToString = new WriterToString();\r\n            const commandOut = new CommandOutput(ws);\r\n            const profileContent: IConfigFile = {\r\n                xliffmergeOptions: {\r\n                    defaultLanguage: 'de',\r\n                    srcDir: WORKDIR,\r\n                    genDir: WORKDIR,\r\n                    i18nFile: MASTERFILE,\r\n                    i18nFormat: 'xmb'\r\n                }\r\n            };\r\n            const xliffMergeCmd = XliffMerge.createFromOptions(commandOut, {languages: ['de', 'en']}, profileContent);\r\n            xliffMergeCmd.run();\r\n            expect(ws.writtenData()).not.toContain('ERROR');\r\n            const langFileEnglish: ITranslationMessagesFile = readXtbWithMaster(xliffMergeCmd.generatedI18nFile('en'), MASTER);\r\n            langFileEnglish.forEachTransUnit((tu: ITransUnit) => {\r\n                expect(tu.targetState()).toBe('new');\r\n            });\r\n            done();\r\n        });\r\n\r\n        it('should return status final for a translated trans unit using format xmb with master file', (done) => {\r\n            FileUtil.copy(MASTER1SRC, MASTER);\r\n            const ws: WriterToString = new WriterToString();\r\n            const commandOut = new CommandOutput(ws);\r\n            const profileContent: IConfigFile = {\r\n                xliffmergeOptions: {\r\n                    defaultLanguage: 'de',\r\n                    srcDir: WORKDIR,\r\n                    genDir: WORKDIR,\r\n                    i18nFile: MASTERFILE,\r\n                    i18nFormat: 'xmb'\r\n                }\r\n            };\r\n            const xliffMergeCmd = XliffMerge.createFromOptions(commandOut, {languages: ['de', 'en']}, profileContent);\r\n            xliffMergeCmd.run();\r\n            expect(ws.writtenData()).not.toContain('ERROR');\r\n            const langFileEnglish: ITranslationMessagesFile = readXtbWithMaster(xliffMergeCmd.generatedI18nFile('en'), MASTER);\r\n            // now translate some texts in the English version\r\n            const tu: ITransUnit = langFileEnglish.transUnitWithId(ID_TRANSLATED_MYFIRST);\r\n            expect(tu).toBeTruthy();\r\n            expect(tu.sourceContent()).toBe('Meine erste I18N-Anwendung');\r\n            expect(tu.targetState()).toBe('new');\r\n            tu.translate('my first i18n application');\r\n            expect(tu.targetState()).toBe('final');\r\n            done();\r\n        });\r\n\r\n    });\r\n\r\n    describe('ngx-translate processing for format xmb', () => {\r\n\r\n        const MASTER1FILE = 'ngxtranslate.xmb';\r\n        const MASTER1SRC = SRCDIR + MASTER1FILE;\r\n        const MASTER_WITHOUT_NGX_TRANSLATE_STUFF = SRCDIR + 'ngExtractedMaster1.xmb';\r\n        const MASTERFILE = 'messages.xmb';\r\n        const MASTER = WORKDIR + MASTERFILE;\r\n\r\n        const ID_NODESC_NOMEANING = '2047558209369508311'; // an ID without set meaning and description\r\n        const ID_MONDAY = '6830980354990918030'; // an ID from ngxtranslate.xmb with meaning \"x.y\" and description \"ngx-translate\"\r\n\r\n        beforeEach(() => {\r\n            if (!fs.existsSync(WORKDIR)) {\r\n                fs.mkdirSync(WORKDIR);\r\n            }\r\n            // cleanup workdir\r\n            FileUtil.deleteFolderContentRecursive(WORKDIR);\r\n        });\r\n\r\n        it('should return null for unset description and meaning in master xmb file', (done) => {\r\n            FileUtil.copy(MASTER1SRC, MASTER);\r\n            const master: ITranslationMessagesFile = readXmb(MASTER);\r\n            expect(master.transUnitWithId(ID_NODESC_NOMEANING).description()).toBeFalsy();\r\n            expect(master.transUnitWithId(ID_NODESC_NOMEANING).meaning()).toBeFalsy();\r\n            done();\r\n        });\r\n\r\n        it('should find description and meaning in master  xmb file', (done) => {\r\n            FileUtil.copy(MASTER1SRC, MASTER);\r\n            const master: ITranslationMessagesFile = readXmb(MASTER);\r\n            expect(master.transUnitWithId(ID_MONDAY).description()).toBe('ngx-translate');\r\n            expect(master.transUnitWithId(ID_MONDAY).meaning()).toBe('dateservice.monday');\r\n            done();\r\n        });\r\n\r\n        it('should find description and meaning in translated xmb file', (done) => {\r\n            FileUtil.copy(MASTER1SRC, MASTER);\r\n            const ws: WriterToString = new WriterToString();\r\n            const commandOut = new CommandOutput(ws);\r\n            const profileContent: IConfigFile = {\r\n                xliffmergeOptions: {\r\n                    defaultLanguage: 'de',\r\n                    srcDir: WORKDIR,\r\n                    genDir: WORKDIR,\r\n                    i18nFile: MASTERFILE,\r\n                    i18nFormat: 'xmb'\r\n                }\r\n            };\r\n            const xliffMergeCmd = XliffMerge.createFromOptions(commandOut, {languages: ['de']}, profileContent);\r\n            xliffMergeCmd.run();\r\n            expect(ws.writtenData()).not.toContain('ERROR');\r\n            const langFile: ITranslationMessagesFile = readXtbWithMaster(xliffMergeCmd.generatedI18nFile('de'), MASTER);\r\n            expect(langFile.transUnitWithId(ID_MONDAY).description()).toBe('ngx-translate');\r\n            expect(langFile.transUnitWithId(ID_MONDAY).meaning()).toBe('dateservice.monday');\r\n            done();\r\n        });\r\n\r\n        it('should write translation json file for ngx-translate', (done) => {\r\n            FileUtil.copy(MASTER1SRC, MASTER);\r\n            const ws: WriterToString = new WriterToString();\r\n            const commandOut = new CommandOutput(ws);\r\n            const profileContent: IConfigFile = {\r\n                xliffmergeOptions: {\r\n                    defaultLanguage: 'de',\r\n                    srcDir: WORKDIR,\r\n                    genDir: WORKDIR,\r\n                    i18nFile: MASTERFILE,\r\n                    i18nFormat: 'xmb',\r\n                    supportNgxTranslate: true\r\n                }\r\n            };\r\n            const xliffMergeCmd = XliffMerge.createFromOptions(commandOut, {languages: ['de']}, profileContent);\r\n            xliffMergeCmd.run();\r\n            expect(ws.writtenData()).not.toContain('ERROR');\r\n            const translationJsonFilename = xliffMergeCmd.generatedNgxTranslateFile('de');\r\n            expect(FileUtil.exists(translationJsonFilename)).toBeTruthy();\r\n            const fileContent = FileUtil.read(translationJsonFilename, 'UTF-8');\r\n            const translation: any = JSON.parse(fileContent);\r\n            expect(translation).toBeTruthy();\r\n            expect(translation.myapp).toBeTruthy();\r\n            expect(translation.dateservice.monday).toBe('Montag');\r\n            expect(translation.dateservice.friday).toBe('Freitag');\r\n            expect(translation.explicitlysetids.test1).toBe('Explizit gesetzte ID');\r\n            expect(Object.keys(translation).length).toBe(5);\r\n            done();\r\n        });\r\n\r\n        it('should handle placeholders in json file for ngx-translate', (done) => {\r\n            FileUtil.copy(MASTER1SRC, MASTER);\r\n            const ws: WriterToString = new WriterToString();\r\n            const commandOut = new CommandOutput(ws);\r\n            const profileContent: IConfigFile = {\r\n                xliffmergeOptions: {\r\n                    defaultLanguage: 'de',\r\n                    srcDir: WORKDIR,\r\n                    genDir: WORKDIR,\r\n                    i18nFile: MASTERFILE,\r\n                    i18nFormat: 'xmb',\r\n                    supportNgxTranslate: true\r\n                }\r\n            };\r\n            const xliffMergeCmd = XliffMerge.createFromOptions(commandOut, {languages: ['de']}, profileContent);\r\n            xliffMergeCmd.run();\r\n            expect(ws.writtenData()).not.toContain('ERROR');\r\n            const translationJsonFilename = xliffMergeCmd.generatedNgxTranslateFile('de');\r\n            expect(FileUtil.exists(translationJsonFilename)).toBeTruthy();\r\n            const fileContent = FileUtil.read(translationJsonFilename, 'UTF-8');\r\n            const translation: any = JSON.parse(fileContent);\r\n            expect(translation).toBeTruthy();\r\n            expect(translation.placeholders).toBeTruthy();\r\n            expect(translation.placeholders.test1placeholder).toBe('{{0}}: Eine Nachricht mit einem Platzhalter');\r\n            expect(translation.placeholders.test2placeholder).toBe('{{0}}: Eine Nachricht mit 2 Platzhaltern: {{1}}');\r\n            expect(translation.placeholders.test2placeholderRepeated).toBe('{{0}}: Eine Nachricht mit 2 Platzhaltern: {{0}} {{1}}');\r\n            done();\r\n        });\r\n\r\n        it('should handle embedded html markup in json file for ngx-translate', (done) => {\r\n            FileUtil.copy(MASTER1SRC, MASTER);\r\n            const ws: WriterToString = new WriterToString();\r\n            const commandOut = new CommandOutput(ws);\r\n            const profileContent: IConfigFile = {\r\n                xliffmergeOptions: {\r\n                    defaultLanguage: 'de',\r\n                    srcDir: WORKDIR,\r\n                    genDir: WORKDIR,\r\n                    i18nFile: MASTERFILE,\r\n                    i18nFormat: 'xmb',\r\n                    supportNgxTranslate: true\r\n                }\r\n            };\r\n            const xliffMergeCmd = XliffMerge.createFromOptions(commandOut, {languages: ['de']}, profileContent);\r\n            xliffMergeCmd.run();\r\n            expect(ws.writtenData()).not.toContain('ERROR');\r\n            const translationJsonFilename = xliffMergeCmd.generatedNgxTranslateFile('de');\r\n            expect(FileUtil.exists(translationJsonFilename)).toBeTruthy();\r\n            const fileContent = FileUtil.read(translationJsonFilename, 'UTF-8');\r\n            const translation: any = JSON.parse(fileContent);\r\n            expect(translation).toBeTruthy();\r\n            expect(translation.embeddedhtml).toBeTruthy();\r\n            expect(translation.embeddedhtml.bold).toBe('Diese Nachricht ist <b>WICHTIG</b>');\r\n            expect(translation.embeddedhtml.boldstrong).toBe('Diese Nachricht ist <b><strong>SEHR WICHTIG</strong></b>');\r\n            expect(translation.embeddedhtml.strange).toBe('Diese Nachricht ist <strange>{{0}}</strange>');\r\n            done();\r\n        });\r\n\r\n        it('should not write empty translation json file for ngx-translate, if there are no translation (issue #18)', (done) => {\r\n            FileUtil.copy(MASTER_WITHOUT_NGX_TRANSLATE_STUFF, MASTER);\r\n            const ws: WriterToString = new WriterToString();\r\n            const commandOut = new CommandOutput(ws);\r\n            const profileContent: IConfigFile = {\r\n                xliffmergeOptions: {\r\n                    defaultLanguage: 'de',\r\n                    srcDir: WORKDIR,\r\n                    genDir: WORKDIR,\r\n                    i18nFile: MASTERFILE,\r\n                    i18nFormat: 'xmb',\r\n                    supportNgxTranslate: true\r\n                }\r\n            };\r\n            const xliffMergeCmd = XliffMerge.createFromOptions(commandOut, {languages: ['de']}, profileContent);\r\n            xliffMergeCmd.run();\r\n            expect(ws.writtenData()).not.toContain('ERROR');\r\n            const translationJsonFilename = xliffMergeCmd.generatedNgxTranslateFile('de');\r\n            expect(FileUtil.exists(translationJsonFilename)).toBeFalsy();\r\n            done();\r\n        });\r\n\r\n        it('should not export @@ids to translation json file, when this is supressed in pattern (issue #62)', (done) => {\r\n            FileUtil.copy(MASTER1SRC, MASTER);\r\n            const ws: WriterToString = new WriterToString();\r\n            const commandOut = new CommandOutput(ws);\r\n            const profileContent: IConfigFile = {\r\n                xliffmergeOptions: {\r\n                    defaultLanguage: 'de',\r\n                    srcDir: WORKDIR,\r\n                    genDir: WORKDIR,\r\n                    i18nFormat: 'xmb',\r\n                    i18nFile: MASTERFILE,\r\n                    supportNgxTranslate: true,\r\n                    ngxTranslateExtractionPattern: 'ngx-translate'\r\n                }\r\n            };\r\n            const xliffMergeCmd = XliffMerge.createFromOptions(commandOut, {languages: ['de']}, profileContent);\r\n            xliffMergeCmd.run();\r\n            expect(ws.writtenData()).not.toContain('ERROR');\r\n            const translationJsonFilename = xliffMergeCmd.generatedNgxTranslateFile('de');\r\n            expect(FileUtil.exists(translationJsonFilename)).toBeTruthy();\r\n            const fileContent = FileUtil.read(translationJsonFilename, 'UTF-8');\r\n            const translation: any = JSON.parse(fileContent);\r\n            expect(translation).toBeTruthy();\r\n            expect(translation.dateservice.monday).toBe('Montag');\r\n            expect(translation.explicitlysetids).toBeFalsy();\r\n            expect(translation['alt-ngx-translate']).toBeFalsy();\r\n            done();\r\n        });\r\n\r\n        it('should export other then ngx-translate description marked entries to translation json file,' +\r\n            ' when this is specified in pattern (issue #62)', (done) => {\r\n            FileUtil.copy(MASTER1SRC, MASTER);\r\n            const ws: WriterToString = new WriterToString();\r\n            const commandOut = new CommandOutput(ws);\r\n            const profileContent: IConfigFile = {\r\n                xliffmergeOptions: {\r\n                    defaultLanguage: 'de',\r\n                    srcDir: WORKDIR,\r\n                    genDir: WORKDIR,\r\n                    i18nFormat: 'xmb',\r\n                    i18nFile: MASTERFILE,\r\n                    supportNgxTranslate: true,\r\n                    ngxTranslateExtractionPattern: 'ngx-translate|alt-ngx-translate'\r\n                }\r\n            };\r\n            const xliffMergeCmd = XliffMerge.createFromOptions(commandOut, {languages: ['de']}, profileContent);\r\n            xliffMergeCmd.run();\r\n            expect(ws.writtenData()).not.toContain('ERROR');\r\n            const translationJsonFilename = xliffMergeCmd.generatedNgxTranslateFile('de');\r\n            expect(FileUtil.exists(translationJsonFilename)).toBeTruthy();\r\n            const fileContent = FileUtil.read(translationJsonFilename, 'UTF-8');\r\n            const translation: any = JSON.parse(fileContent);\r\n            expect(translation).toBeTruthy();\r\n            expect(translation.dateservice.monday).toBe('Montag');\r\n            expect(translation.explicitlysetids).toBeFalsy();\r\n            expect(translation['alt-ngx-translate'].example1).toBe('Alternate description for ngx-translate export');\r\n            done();\r\n        });\r\n\r\n    });\r\n});\r\n"]}