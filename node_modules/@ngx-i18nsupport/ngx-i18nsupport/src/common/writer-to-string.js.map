{"version":3,"file":"writer-to-string.js","sourceRoot":"","sources":["../../../../projects/xliffmerge/src/common/writer-to-string.ts"],"names":[],"mappings":";;AAAA,mCAAgC;AAChC,iCAAgC;AAChC;;;;;GAKG;AAEH,MAAa,cAAe,SAAQ,iBAAQ;IAIxC;QACI,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;IAC3B,CAAC;IAEM,MAAM,CAAC,KAAU,EAAE,QAAgB,EAAE,QAAkB;QAC1D,IAAI,WAAW,CAAC;QAChB,IAAI,eAAQ,CAAC,KAAK,CAAC,EAAE;YACjB,WAAW,GAAG,KAAK,CAAC;SACvB;aAAM,IAAI,KAAK,YAAY,MAAM,EAAE;YAChC,WAAW,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC;SAClC;aAAM;YACH,WAAW,GAAG,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;SACxD;QACD,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,GAAG,WAAW,CAAC;QACpD,QAAQ,EAAE,CAAC;IACf,CAAC;IAED;;;OAGG;IACI,WAAW;QACd,OAAO,IAAI,CAAC,YAAY,CAAC;IAC7B,CAAC;CACJ;AA7BD,wCA6BC","sourcesContent":["import {Writable} from 'stream';\r\nimport {isString} from './util';\r\n/**\r\n * Created by martin on 20.02.2017.\r\n * A helper class for testing.\r\n * Can be used as a WritableStream and writes everything (synchronously) into a string,\r\n * that can easily be read by the tests.\r\n */\r\n\r\nexport class WriterToString extends Writable {\r\n\r\n    private resultString: string;\r\n\r\n    constructor() {\r\n        super();\r\n        this.resultString = '';\r\n    }\r\n\r\n    public _write(chunk: any, encoding: string, callback: Function): void {\r\n        let chunkString;\r\n        if (isString(chunk)) {\r\n            chunkString = chunk;\r\n        } else if (chunk instanceof Buffer) {\r\n            chunkString = chunk.toString();\r\n        } else {\r\n            chunkString = Buffer.alloc(chunk).toString(encoding);\r\n        }\r\n        this.resultString = this.resultString + chunkString;\r\n        callback();\r\n    }\r\n\r\n    /**\r\n     * Returns a string of everything, that was written to the stream so far.\r\n     * @return written data\r\n     */\r\n    public writtenData(): string {\r\n        return this.resultString;\r\n    }\r\n}\r\n"]}