"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = require("@angular/core");
var testing_1 = require("@angular/core/testing");
var reflect_1 = require("../common/reflect");
function MockRender(template, params) {
    var mockedTemplate = '';
    if (typeof template === 'string') {
        mockedTemplate = template;
    }
    else {
        var _a = reflect_1.directiveResolver.resolve(template), inputs = _a.inputs, outputs = _a.outputs, selector = _a.selector;
        mockedTemplate += "<" + selector;
        if (inputs) {
            inputs.forEach(function (definition) {
                var _a = definition.split(': '), property = _a[0], alias = _a[1];
                if (alias && params && typeof params[alias]) {
                    mockedTemplate += " [" + alias + "]=\"" + alias + "\"";
                }
                else if (property && params && typeof params[property]) {
                    mockedTemplate += " [" + property + "]=\"" + property + "\"";
                }
            });
        }
        if (outputs) {
            outputs.forEach(function (definition) {
                var _a = definition.split(': '), property = _a[0], alias = _a[1];
                if (alias && params && typeof params[alias]) {
                    mockedTemplate += " (" + alias + ")=\"" + alias + "($event)\"";
                }
                else if (property && params && typeof params[property]) {
                    mockedTemplate += " (" + property + ")=\"" + property + "($event)\"";
                }
            });
        }
        mockedTemplate += "></" + selector + ">";
    }
    var options = {
        selector: 'mock-render',
        template: mockedTemplate,
    };
    var component = core_1.Component(options)((function () {
        function MockRenderComponent() {
            Object.assign(this, params);
        }
        return MockRenderComponent;
    }()));
    testing_1.getTestBed()._instantiated = false;
    testing_1.getTestBed()._moduleFactory = undefined;
    testing_1.TestBed.configureTestingModule({
        declarations: [component],
    });
    var fixture = testing_1.TestBed.createComponent(component);
    fixture.detectChanges();
    return fixture;
}
exports.MockRender = MockRender;
//# sourceMappingURL=mock-render.js.map