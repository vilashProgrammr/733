/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Directive, ElementRef, HostListener, Input } from '@angular/core';
import { NgForm } from '@angular/forms';
var NgxScrollToFirstInvalidDirective = /** @class */ (function () {
    function NgxScrollToFirstInvalidDirective(el) {
        this.el = el;
    }
    /**
     * @param {?} element
     * @return {?}
     */
    NgxScrollToFirstInvalidDirective.scrollToElement = /**
     * @param {?} element
     * @return {?}
     */
    function (element) {
        if (element) {
            /** @type {?} */
            var distance = window.pageYOffset - Math.abs(element.getBoundingClientRect().y);
            window.scroll({
                behavior: 'smooth',
                left: 0,
                top: element.getBoundingClientRect().top + window.scrollY - 150
            });
            setTimeout((/**
             * @return {?}
             */
            function () {
                element.focus();
                element.blur(); // Trigger error messages
                element.focus();
            }), distance);
        }
    };
    /**
     * @param {?} formGroup
     * @return {?}
     */
    NgxScrollToFirstInvalidDirective.markFormGroupTouched = /**
     * @param {?} formGroup
     * @return {?}
     */
    function (formGroup) {
        ((/** @type {?} */ (Object))).values(formGroup.controls).forEach((/**
         * @param {?} control
         * @return {?}
         */
        function (control) {
            control.markAsTouched();
            if (control.controls) {
                NgxScrollToFirstInvalidDirective.markFormGroupTouched(control);
            }
        }));
    };
    /**
     * @param {?} event
     * @return {?}
     */
    NgxScrollToFirstInvalidDirective.prototype.onSubmit = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        event.preventDefault();
        if (!this.formGroup.valid) {
            NgxScrollToFirstInvalidDirective.markFormGroupTouched(this.formGroup);
            /** @type {?} */
            var formControlInvalid = this.el.nativeElement.querySelector('.ng-invalid');
            if (formControlInvalid) {
                return NgxScrollToFirstInvalidDirective.scrollToElement(formControlInvalid);
            }
            else {
                // The first element is the global form and here we are looking for the first nested form
                /** @type {?} */
                var formGroupInvalid = this.el.nativeElement.querySelectorAll('form .ng-invalid');
                if (formGroupInvalid && formGroupInvalid.length) {
                    return NgxScrollToFirstInvalidDirective.scrollToElement(formGroupInvalid[0]);
                }
            }
            return NgxScrollToFirstInvalidDirective.scrollToElement(this.el.nativeElement);
        }
    };
    NgxScrollToFirstInvalidDirective.decorators = [
        { type: Directive, args: [{ selector: '[ngxScrollToFirstInvalid]' },] }
    ];
    /** @nocollapse */
    NgxScrollToFirstInvalidDirective.ctorParameters = function () { return [
        { type: ElementRef }
    ]; };
    NgxScrollToFirstInvalidDirective.propDecorators = {
        formGroup: [{ type: Input }],
        onSubmit: [{ type: HostListener, args: ['submit', ['$event'],] }]
    };
    return NgxScrollToFirstInvalidDirective;
}());
export { NgxScrollToFirstInvalidDirective };
if (false) {
    /** @type {?} */
    NgxScrollToFirstInvalidDirective.prototype.formGroup;
    /**
     * @type {?}
     * @private
     */
    NgxScrollToFirstInvalidDirective.prototype.el;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LXNjcm9sbC10by1maXJzdC1pbnZhbGlkLmRpcmVjdGl2ZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bpc21hZXN0cm8vbmd4LXNjcm9sbC10by1maXJzdC1pbnZhbGlkLyIsInNvdXJjZXMiOlsibmd4LXNjcm9sbC10by1maXJzdC1pbnZhbGlkLmRpcmVjdGl2ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFDLFNBQVMsRUFBRSxVQUFVLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUN6RSxPQUFPLEVBQUMsTUFBTSxFQUFDLE1BQU0sZ0JBQWdCLENBQUM7QUFFdEM7SUFJRSwwQ0FBb0IsRUFBYztRQUFkLE9BQUUsR0FBRixFQUFFLENBQVk7SUFDbEMsQ0FBQzs7Ozs7SUFFTSxnREFBZTs7OztJQUF0QixVQUF1QixPQUFPO1FBQzVCLElBQUksT0FBTyxFQUFFOztnQkFDTCxRQUFRLEdBQUcsTUFBTSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxxQkFBcUIsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUVqRixNQUFNLENBQUMsTUFBTSxDQUFDO2dCQUNaLFFBQVEsRUFBRSxRQUFRO2dCQUNsQixJQUFJLEVBQUUsQ0FBQztnQkFDUCxHQUFHLEVBQUUsT0FBTyxDQUFDLHFCQUFxQixFQUFFLENBQUMsR0FBRyxHQUFHLE1BQU0sQ0FBQyxPQUFPLEdBQUcsR0FBRzthQUNoRSxDQUFDLENBQUM7WUFFSCxVQUFVOzs7WUFBQztnQkFDVCxPQUFPLENBQUMsS0FBSyxFQUFFLENBQUM7Z0JBQ2hCLE9BQU8sQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLHlCQUF5QjtnQkFDekMsT0FBTyxDQUFDLEtBQUssRUFBRSxDQUFDO1lBQ2xCLENBQUMsR0FBRSxRQUFRLENBQUMsQ0FBQztTQUNkO0lBQ0gsQ0FBQzs7Ozs7SUFFTSxxREFBb0I7Ozs7SUFBM0IsVUFBNEIsU0FBUztRQUNuQyxDQUFDLG1CQUFLLE1BQU0sRUFBQSxDQUFDLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxPQUFPOzs7O1FBQUMsVUFBQSxPQUFPO1lBQ3RELE9BQU8sQ0FBQyxhQUFhLEVBQUUsQ0FBQztZQUV4QixJQUFJLE9BQU8sQ0FBQyxRQUFRLEVBQUU7Z0JBQ3BCLGdDQUFnQyxDQUFDLG9CQUFvQixDQUFDLE9BQU8sQ0FBQyxDQUFDO2FBQ2hFO1FBQ0gsQ0FBQyxFQUFDLENBQUM7SUFDTCxDQUFDOzs7OztJQUdELG1EQUFROzs7O0lBRFIsVUFDUyxLQUFLO1FBQ1osS0FBSyxDQUFDLGNBQWMsRUFBRSxDQUFDO1FBRXZCLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRTtZQUN6QixnQ0FBZ0MsQ0FBQyxvQkFBb0IsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7O2dCQUVoRSxrQkFBa0IsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLGFBQWEsQ0FBQyxhQUFhLENBQUMsYUFBYSxDQUFDO1lBRTdFLElBQUksa0JBQWtCLEVBQUU7Z0JBQ3RCLE9BQU8sZ0NBQWdDLENBQUMsZUFBZSxDQUFDLGtCQUFrQixDQUFDLENBQUM7YUFDN0U7aUJBQU07OztvQkFFQyxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLGFBQWEsQ0FBQyxnQkFBZ0IsQ0FBQyxrQkFBa0IsQ0FBQztnQkFDbkYsSUFBSSxnQkFBZ0IsSUFBSSxnQkFBZ0IsQ0FBQyxNQUFNLEVBQUU7b0JBQy9DLE9BQU8sZ0NBQWdDLENBQUMsZUFBZSxDQUFDLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7aUJBQzlFO2FBQ0Y7WUFFRCxPQUFPLGdDQUFnQyxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1NBQ2hGO0lBQ0gsQ0FBQzs7Z0JBeERGLFNBQVMsU0FBQyxFQUFDLFFBQVEsRUFBRSwyQkFBMkIsRUFBQzs7OztnQkFIL0IsVUFBVTs7OzRCQUsxQixLQUFLOzJCQWlDTCxZQUFZLFNBQUMsUUFBUSxFQUFFLENBQUMsUUFBUSxDQUFDOztJQXNCcEMsdUNBQUM7Q0FBQSxBQXpERCxJQXlEQztTQXhEWSxnQ0FBZ0M7OztJQUMzQyxxREFBMkI7Ozs7O0lBRWYsOENBQXNCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtEaXJlY3RpdmUsIEVsZW1lbnRSZWYsIEhvc3RMaXN0ZW5lciwgSW5wdXR9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtOZ0Zvcm19IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcblxuQERpcmVjdGl2ZSh7c2VsZWN0b3I6ICdbbmd4U2Nyb2xsVG9GaXJzdEludmFsaWRdJ30pXG5leHBvcnQgY2xhc3MgTmd4U2Nyb2xsVG9GaXJzdEludmFsaWREaXJlY3RpdmUge1xuICBASW5wdXQoKSBmb3JtR3JvdXA6IE5nRm9ybTtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGVsOiBFbGVtZW50UmVmKSB7XG4gIH1cblxuICBzdGF0aWMgc2Nyb2xsVG9FbGVtZW50KGVsZW1lbnQpIHtcbiAgICBpZiAoZWxlbWVudCkge1xuICAgICAgY29uc3QgZGlzdGFuY2UgPSB3aW5kb3cucGFnZVlPZmZzZXQgLSBNYXRoLmFicyhlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnkpO1xuXG4gICAgICB3aW5kb3cuc2Nyb2xsKHtcbiAgICAgICAgYmVoYXZpb3I6ICdzbW9vdGgnLFxuICAgICAgICBsZWZ0OiAwLFxuICAgICAgICB0b3A6IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wICsgd2luZG93LnNjcm9sbFkgLSAxNTBcbiAgICAgIH0pO1xuXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgZWxlbWVudC5mb2N1cygpO1xuICAgICAgICBlbGVtZW50LmJsdXIoKTsgLy8gVHJpZ2dlciBlcnJvciBtZXNzYWdlc1xuICAgICAgICBlbGVtZW50LmZvY3VzKCk7XG4gICAgICB9LCBkaXN0YW5jZSk7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIG1hcmtGb3JtR3JvdXBUb3VjaGVkKGZvcm1Hcm91cCkge1xuICAgICg8YW55Pk9iamVjdCkudmFsdWVzKGZvcm1Hcm91cC5jb250cm9scykuZm9yRWFjaChjb250cm9sID0+IHtcbiAgICAgIGNvbnRyb2wubWFya0FzVG91Y2hlZCgpO1xuXG4gICAgICBpZiAoY29udHJvbC5jb250cm9scykge1xuICAgICAgICBOZ3hTY3JvbGxUb0ZpcnN0SW52YWxpZERpcmVjdGl2ZS5tYXJrRm9ybUdyb3VwVG91Y2hlZChjb250cm9sKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIEBIb3N0TGlzdGVuZXIoJ3N1Ym1pdCcsIFsnJGV2ZW50J10pXG4gIG9uU3VibWl0KGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgIGlmICghdGhpcy5mb3JtR3JvdXAudmFsaWQpIHtcbiAgICAgIE5neFNjcm9sbFRvRmlyc3RJbnZhbGlkRGlyZWN0aXZlLm1hcmtGb3JtR3JvdXBUb3VjaGVkKHRoaXMuZm9ybUdyb3VwKTtcblxuICAgICAgY29uc3QgZm9ybUNvbnRyb2xJbnZhbGlkID0gdGhpcy5lbC5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uZy1pbnZhbGlkJyk7XG5cbiAgICAgIGlmIChmb3JtQ29udHJvbEludmFsaWQpIHtcbiAgICAgICAgcmV0dXJuIE5neFNjcm9sbFRvRmlyc3RJbnZhbGlkRGlyZWN0aXZlLnNjcm9sbFRvRWxlbWVudChmb3JtQ29udHJvbEludmFsaWQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVGhlIGZpcnN0IGVsZW1lbnQgaXMgdGhlIGdsb2JhbCBmb3JtIGFuZCBoZXJlIHdlIGFyZSBsb29raW5nIGZvciB0aGUgZmlyc3QgbmVzdGVkIGZvcm1cbiAgICAgICAgY29uc3QgZm9ybUdyb3VwSW52YWxpZCA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdmb3JtIC5uZy1pbnZhbGlkJyk7XG4gICAgICAgIGlmIChmb3JtR3JvdXBJbnZhbGlkICYmIGZvcm1Hcm91cEludmFsaWQubGVuZ3RoKSB7XG4gICAgICAgICAgcmV0dXJuIE5neFNjcm9sbFRvRmlyc3RJbnZhbGlkRGlyZWN0aXZlLnNjcm9sbFRvRWxlbWVudChmb3JtR3JvdXBJbnZhbGlkWzBdKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gTmd4U2Nyb2xsVG9GaXJzdEludmFsaWREaXJlY3RpdmUuc2Nyb2xsVG9FbGVtZW50KHRoaXMuZWwubmF0aXZlRWxlbWVudCk7XG4gICAgfVxuICB9XG59XG4iXX0=