!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/common"),require("@angular/core")):"function"==typeof define&&define.amd?define("@ngx-translate/i18n-polyfill",["exports","@angular/common","@angular/core"],e):e((t["ngx-translate"]=t["ngx-translate"]||{},t["ngx-translate"]["i18n-polyfill"]={}),t.ng.common,t.ng.core)}(this,function(t,n,a){"use strict";var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};function o(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function w(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,s=n.call(t),o=[];try{for(;(void 0===e||0<e--)&&!(i=s.next()).done;)o.push(i.value)}catch(a){r={error:a}}finally{try{i&&!i.done&&(n=s["return"])&&n.call(s)}finally{if(r)throw r.error}}return o}function u(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(w(arguments[e]));return t}var r=function(){function t(t,e){this.value=t,this.sourceSpan=e}return t.prototype.visit=function(t,e){return t.visitText(this,e)},t}(),p=function(){function t(t,e,n,i,r){this.switchValue=t,this.type=e,this.cases=n,this.sourceSpan=i,this.switchValueSourceSpan=r}return t.prototype.visit=function(t,e){return t.visitExpansion(this,e)},t}(),h=function(){function t(t,e,n,i,r){this.value=t,this.expression=e,this.sourceSpan=n,this.valueSourceSpan=i,this.expSourceSpan=r}return t.prototype.visit=function(t,e){return t.visitExpansionCase(this,e)},t}(),c=function(){function t(t,e,n,i){this.name=t,this.value=e,this.sourceSpan=n,this.valueSpan=i}return t.prototype.visit=function(t,e){return t.visitAttribute(this,e)},t}(),l=function(){function t(t,e,n,i,r,s){void 0===r&&(r=null),void 0===s&&(s=null),this.name=t,this.attrs=e,this.children=n,this.sourceSpan=i,this.startSourceSpan=r,this.endSourceSpan=s}return t.prototype.visit=function(t,e){return t.visitElement(this,e)},t}(),s=function(){function t(t,e){this.value=t,this.sourceSpan=e}return t.prototype.visit=function(t,e){return t.visitComment(this,e)},t}();function d(e,t,n){void 0===n&&(n=null);var i=[],r=e.visit?function(t){return e.visit(t,n)||t.visit(e,n)}:function(t){return t.visit(e,n)};return t.forEach(function(t){var e=r(t);e&&i.push(e)}),i}
/**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */var f=function(t,e,n,i,r,s){this.nodes=t,this.placeholders=e,this.placeholderToMessage=n,this.meaning=i,this.description=r,this.id=s,t.length?this.sources=[{filePath:t[0].sourceSpan.start.file.url,startLine:t[0].sourceSpan.start.line+1,startCol:t[0].sourceSpan.start.col+1,endLine:t[t.length-1].sourceSpan.end.line+1,endCol:t[0].sourceSpan.start.col+1}]:this.sources=[]},_=function(){function t(t,e){this.value=t,this.sourceSpan=e}return t.prototype.visit=function(t,e){return t.visitText(this,e)},t}(),v=function(){function t(t,e){this.children=t,this.sourceSpan=e}return t.prototype.visit=function(t,e){return t.visitContainer(this,e)},t}(),g=function(){function t(t,e,n,i){this.expression=t,this.type=e,this.cases=n,this.sourceSpan=i}return t.prototype.visit=function(t,e){return t.visitIcu(this,e)},t}(),m=function(){function t(t,e,n,i,r,s,o){this.tag=t,this.attrs=e,this.startName=n,this.closeName=i,this.children=r,this.isVoid=s,this.sourceSpan=o}return t.prototype.visit=function(t,e){return t.visitTagPlaceholder(this,e)},t}(),y=function(){function t(t,e,n){this.value=t,this.name=e,this.sourceSpan=n}return t.prototype.visit=function(t,e){return t.visitPlaceholder(this,e)},t}(),T=function(){function t(t,e,n){this.value=t,this.name=e,this.sourceSpan=n}return t.prototype.visit=function(t,e){return t.visitIcuPlaceholder(this,e)},t}(),e=function(){function t(){}return t.prototype.visitText=function(t,e){},t.prototype.visitContainer=function(t,e){var n=this;t.children.forEach(function(t){return t.visit(n)})},t.prototype.visitIcu=function(e,t){var n=this;Object.keys(e.cases).forEach(function(t){e.cases[t].visit(n)})},t.prototype.visitTagPlaceholder=function(t,e){var n=this;t.children.forEach(function(t){return t.visit(n)})},t.prototype.visitPlaceholder=function(t,e){},t.prototype.visitIcuPlaceholder=function(t,e){},t}(),
/**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */E=(function(e){function t(t){return void 0===t&&(t=0),e.call(this,"\n"+new Array(t+1).join(" "))||this}o(t,e)}(function(){function t(t){this.value=t}return t.prototype.visit=function(t){return t.visitText(this)},t}()),function(){function t(t,e,n,i){this.file=t,this.offset=e,this.line=n,this.col=i}return t.prototype.toString=function(){return null!=this.offset?this.line+":"+this.col:""},t.prototype.getContext=function(t,e){var n=this.file.content,i=this.offset;if(null!=i){i>n.length-1&&(i=n.length-1);for(var r=i,s=0,o=0;s<t&&0<i&&(s++,"\n"!==n[--i]||++o!==e););for(o=s=0;s<t&&r<n.length-1&&(s++,"\n"!==n[++r]||++o!==e););return{before:n.substring(i,this.offset),after:n.substring(this.offset,r+1)}}return null},t}()),C=function(t,e){void 0===e&&(e=""),this.content=t,this.url=e},S=function(){function t(t,e,n){void 0===n&&(n=null),this.start=t,this.end=e,this.details=n}return t.prototype.toString=function(){return this.start.file.content.substring(this.start.offset,this.end.offset)},t}(),x={WARNING:0,ERROR:1};x[x.WARNING]="WARNING",x[x.ERROR]="ERROR";var A=function(){function t(t,e,n){void 0===n&&(n=x.ERROR),this.span=t,this.msg=e,this.level=n}return t.prototype.contextualMessage=function(){var t=this.span.start.getContext(100,3);return t?' ("'+t.before+"["+x[this.level]+" ->]"+t.after+'")':""},t.prototype.toString=function(){var t=this.span.details?", "+this.span.details:"";return""+this.msg+this.contextualMessage()+": "+this.span.start+t},t}(),k=function(n){function t(t,e){return n.call(this,t,e)||this}return o(t,n),t}(A);function N(t){return t.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}
/**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */var P=new function(t,e){this.start=t,this.end=e}("{{","}}"),I=9,b=10,O=11,R=12,L=13,M=32,B=34,D=36,U=39,X=41,V=43,F=44,q=45,K=48,j=57,H=65,W=69,G=70,z=90,Y=95,Q=97,$=101,Z=102,J=110,tt=114,et=116,nt=118,it=122,rt=123,st=125,ot=160,at=96;function ht(t){return I<=t&&t<=M||t===ot}function ut(t){return K<=t&&t<=j}function pt(t){return Q<=t&&t<=it||H<=t&&t<=z}
/**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var ct={RAW_TEXT:0,ESCAPABLE_RAW_TEXT:1,PARSABLE_DATA:2};function lt(t){if(":"!==t[0])return[null,t];var e=t.indexOf(":",1);if(-1===e)throw new Error('Unsupported format "'+t+'" expecting ":namespace:name"');return[t.slice(1,e),t.slice(e+1)]}function dt(t){return null===t?null:lt(t)[0]}function ft(t,e){return t?":"+t+":"+e:e}ct[ct.RAW_TEXT]="RAW_TEXT",ct[ct.ESCAPABLE_RAW_TEXT]="ESCAPABLE_RAW_TEXT",ct[ct.PARSABLE_DATA]="PARSABLE_DATA";var _t={Aacute:"Á",aacute:"á",Acirc:"Â",acirc:"â",acute:"´",AElig:"Æ",aelig:"æ",Agrave:"À",agrave:"à",alefsym:"ℵ",Alpha:"Α",alpha:"α",amp:"&",and:"∧",ang:"∠",apos:"'",Aring:"Å",aring:"å",asymp:"≈",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",bdquo:"„",Beta:"Β",beta:"β",brvbar:"¦",bull:"•",cap:"∩",Ccedil:"Ç",ccedil:"ç",cedil:"¸",cent:"¢",Chi:"Χ",chi:"χ",circ:"ˆ",clubs:"♣",cong:"≅",copy:"©",crarr:"↵",cup:"∪",curren:"¤",dagger:"†",Dagger:"‡",darr:"↓",dArr:"⇓",deg:"°",Delta:"Δ",delta:"δ",diams:"♦",divide:"÷",Eacute:"É",eacute:"é",Ecirc:"Ê",ecirc:"ê",Egrave:"È",egrave:"è",empty:"∅",emsp:" ",ensp:" ",Epsilon:"Ε",epsilon:"ε",equiv:"≡",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",exist:"∃",fnof:"ƒ",forall:"∀",frac12:"½",frac14:"¼",frac34:"¾",frasl:"⁄",Gamma:"Γ",gamma:"γ",ge:"≥",gt:">",harr:"↔",hArr:"⇔",hearts:"♥",hellip:"…",Iacute:"Í",iacute:"í",Icirc:"Î",icirc:"î",iexcl:"¡",Igrave:"Ì",igrave:"ì",image:"ℑ",infin:"∞","int":"∫",Iota:"Ι",iota:"ι",iquest:"¿",isin:"∈",Iuml:"Ï",iuml:"ï",Kappa:"Κ",kappa:"κ",Lambda:"Λ",lambda:"λ",lang:"⟨",laquo:"«",larr:"←",lArr:"⇐",lceil:"⌈",ldquo:"“",le:"≤",lfloor:"⌊",lowast:"∗",loz:"◊",lrm:"‎",lsaquo:"‹",lsquo:"‘",lt:"<",macr:"¯",mdash:"—",micro:"µ",middot:"·",minus:"−",Mu:"Μ",mu:"μ",nabla:"∇",nbsp:" ",ndash:"–",ne:"≠",ni:"∋",not:"¬",notin:"∉",nsub:"⊄",Ntilde:"Ñ",ntilde:"ñ",Nu:"Ν",nu:"ν",Oacute:"Ó",oacute:"ó",Ocirc:"Ô",ocirc:"ô",OElig:"Œ",oelig:"œ",Ograve:"Ò",ograve:"ò",oline:"‾",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",oplus:"⊕",or:"∨",ordf:"ª",ordm:"º",Oslash:"Ø",oslash:"ø",Otilde:"Õ",otilde:"õ",otimes:"⊗",Ouml:"Ö",ouml:"ö",para:"¶",permil:"‰",perp:"⊥",Phi:"Φ",phi:"φ",Pi:"Π",pi:"π",piv:"ϖ",plusmn:"±",pound:"£",prime:"′",Prime:"″",prod:"∏",prop:"∝",Psi:"Ψ",psi:"ψ",quot:'"',radic:"√",rang:"⟩",raquo:"»",rarr:"→",rArr:"⇒",rceil:"⌉",rdquo:"”",real:"ℜ",reg:"®",rfloor:"⌋",Rho:"Ρ",rho:"ρ",rlm:"‏",rsaquo:"›",rsquo:"’",sbquo:"‚",Scaron:"Š",scaron:"š",sdot:"⋅",sect:"§",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sim:"∼",spades:"♠",sub:"⊂",sube:"⊆",sum:"∑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supe:"⊇",szlig:"ß",Tau:"Τ",tau:"τ",there4:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thinsp:" ",THORN:"Þ",thorn:"þ",tilde:"˜",times:"×",trade:"™",Uacute:"Ú",uacute:"ú",uarr:"↑",uArr:"⇑",Ucirc:"Û",ucirc:"û",Ugrave:"Ù",ugrave:"ù",uml:"¨",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",Uuml:"Ü",uuml:"ü",weierp:"℘",Xi:"Ξ",xi:"ξ",Yacute:"Ý",yacute:"ý",yen:"¥",yuml:"ÿ",Yuml:"Ÿ",Zeta:"Ζ",zeta:"ζ",zwj:"‍",zwnj:"‌"};_t.ngsp="";var vt={TAG_OPEN_START:0,TAG_OPEN_END:1,TAG_OPEN_END_VOID:2,TAG_CLOSE:3,TEXT:4,ESCAPABLE_RAW_TEXT:5,RAW_TEXT:6,COMMENT_START:7,COMMENT_END:8,CDATA_START:9,CDATA_END:10,ATTR_NAME:11,ATTR_VALUE:12,DOC_TYPE:13,EXPANSION_FORM_START:14,EXPANSION_CASE_VALUE:15,EXPANSION_CASE_EXP_START:16,EXPANSION_CASE_EXP_END:17,EXPANSION_FORM_END:18,EOF:19};vt[vt.TAG_OPEN_START]="TAG_OPEN_START",vt[vt.TAG_OPEN_END]="TAG_OPEN_END",vt[vt.TAG_OPEN_END_VOID]="TAG_OPEN_END_VOID",vt[vt.TAG_CLOSE]="TAG_CLOSE",vt[vt.TEXT]="TEXT",vt[vt.ESCAPABLE_RAW_TEXT]="ESCAPABLE_RAW_TEXT",vt[vt.RAW_TEXT]="RAW_TEXT",vt[vt.COMMENT_START]="COMMENT_START",vt[vt.COMMENT_END]="COMMENT_END",vt[vt.CDATA_START]="CDATA_START",vt[vt.CDATA_END]="CDATA_END",vt[vt.ATTR_NAME]="ATTR_NAME",vt[vt.ATTR_VALUE]="ATTR_VALUE",vt[vt.DOC_TYPE]="DOC_TYPE",vt[vt.EXPANSION_FORM_START]="EXPANSION_FORM_START",vt[vt.EXPANSION_CASE_VALUE]="EXPANSION_CASE_VALUE",vt[vt.EXPANSION_CASE_EXP_START]="EXPANSION_CASE_EXP_START",vt[vt.EXPANSION_CASE_EXP_END]="EXPANSION_CASE_EXP_END",vt[vt.EXPANSION_FORM_END]="EXPANSION_FORM_END",vt[vt.EOF]="EOF";var gt=function(t,e,n){this.type=t,this.parts=e,this.sourceSpan=n},mt=function(r){function t(t,e,n){var i=r.call(this,n,t)||this;return i.tokenType=e,i}return o(t,r),t}(A),yt=function(t,e){this.tokens=t,this.errors=e};var Tt=/\r\n?/g;function Et(t){return'Unexpected character "'+(0===t?"EOF":String.fromCharCode(t))+'"'}function Ct(t){return'Unknown entity "'+t+'" - use the "&#<decimal>;" or  "&#x<hex>;" syntax'}var St=function(t){this.error=t},xt=function(){function t(t,e,n,i){void 0===i&&(i=P),this._file=t,this._getTagDefinition=e,this._tokenizeIcu=n,this._interpolationConfig=i,this._peek=-1,this._nextPeek=-1,this._index=-1,this._line=0,this._column=-1,this._expansionCaseStack=[],this._inInterpolation=!1,this.tokens=[],this.errors=[],this._input=t.content,this._length=t.content.length,this._advance()}return t.prototype._processCarriageReturns=function(t){return t.replace(Tt,"\n")},t.prototype.tokenize=function(){for(;0!==this._peek;){var t=this._getLocation();try{this._attemptCharCode(60)?this._attemptCharCode(33)?this._attemptCharCode(91)?this._consumeCdata(t):this._attemptCharCode(q)?this._consumeComment(t):this._consumeDocType(t):this._attemptCharCode(47)?this._consumeTagClose(t):this._consumeTagOpen(t):this._tokenizeIcu&&this._tokenizeExpansionForm()||this._consumeText()}catch(e){if(!(e instanceof St))throw e;this.errors.push(e.error)}}return this._beginToken(vt.EOF),this._endToken([]),new yt(function(t){for(var e=[],n=undefined,i=0;i<t.length;i++){var r=t[i];n&&n.type===vt.TEXT&&r.type===vt.TEXT?(n.parts[0]+=r.parts[0],n.sourceSpan.end=r.sourceSpan.end):(n=r,e.push(n))}return e}(this.tokens),this.errors)},t.prototype._tokenizeExpansionForm=function(){if(Pt(this._input,this._index,this._interpolationConfig))return this._consumeExpansionFormStart(),!0;if((61===(t=this._peek)||pt(t)||ut(t))&&this._isInExpansionForm())return this._consumeExpansionCaseStart(),!0;var t;if(this._peek===st){if(this._isInExpansionCase())return this._consumeExpansionCaseEnd(),!0;if(this._isInExpansionForm())return this._consumeExpansionFormEnd(),!0}return!1},t.prototype._getLocation=function(){return new E(this._file,this._index,this._line,this._column)},t.prototype._getSpan=function(t,e){return void 0===t&&(t=this._getLocation()),void 0===e&&(e=this._getLocation()),new S(t,e)},t.prototype._beginToken=function(t,e){void 0===e&&(e=this._getLocation()),this._currentTokenStart=e,this._currentTokenType=t},t.prototype._endToken=function(t,e){void 0===e&&(e=this._getLocation());var n=new gt(this._currentTokenType,t,new S(this._currentTokenStart,e));return this.tokens.push(n),this._currentTokenStart=null,this._currentTokenType=null,n},t.prototype._createError=function(t,e){this._isInExpansionForm()&&(t+=' (Do you have an unescaped "{" in your template? Use "{{ \'{\' }}") to escape it.)');var n=new mt(t,this._currentTokenType,e);return this._currentTokenStart=null,this._currentTokenType=null,new St(n)},t.prototype._advance=function(){if(this._index>=this._length)throw this._createError(Et(0),this._getSpan());this._peek===b?(this._line++,this._column=0):this._peek!==b&&this._peek!==L&&this._column++,this._index++,this._peek=this._index>=this._length?0:this._input.charCodeAt(this._index),this._nextPeek=this._index+1>=this._length?0:this._input.charCodeAt(this._index+1)},t.prototype._attemptCharCode=function(t){return this._peek===t&&(this._advance(),!0)},t.prototype._attemptCharCodeCaseInsensitive=function(t){return e=this._peek,n=t,It(e)===It(n)&&(this._advance(),!0);var e,n},t.prototype._requireCharCode=function(t){var e=this._getLocation();if(!this._attemptCharCode(t))throw this._createError(Et(this._peek),this._getSpan(e,e))},t.prototype._attemptStr=function(t){var e=t.length;if(this._index+e>this._length)return!1;for(var n=this._savePosition(),i=0;i<e;i++)if(!this._attemptCharCode(t.charCodeAt(i)))return this._restorePosition(n),!1;return!0},t.prototype._attemptStrCaseInsensitive=function(t){for(var e=0;e<t.length;e++)if(!this._attemptCharCodeCaseInsensitive(t.charCodeAt(e)))return!1;return!0},t.prototype._requireStr=function(t){var e=this._getLocation();if(!this._attemptStr(t))throw this._createError(Et(this._peek),this._getSpan(e))},t.prototype._attemptCharCodeUntilFn=function(t){for(;!t(this._peek);)this._advance()},t.prototype._requireCharCodeUntilFn=function(t,e){var n=this._getLocation();if(this._attemptCharCodeUntilFn(t),this._index-n.offset<e)throw this._createError(Et(this._peek),this._getSpan(n,n))},t.prototype._attemptUntilChar=function(t){for(;this._peek!==t;)this._advance()},t.prototype._readChar=function(t){if(t&&38===this._peek)return this._decodeEntity();var e=this._index;return this._advance(),this._input[e]},t.prototype._decodeEntity=function(){var t=this._getLocation();if(this._advance(),!this._attemptCharCode(35)){var e=this._savePosition();if(this._attemptCharCodeUntilFn(Nt),59!==this._peek)return this._restorePosition(e),"&";this._advance();var n=this._input.substring(t.offset+1,this._index-1),i=_t[n];if(!i)throw this._createError(Ct(n),this._getSpan(t));return i}var r=this._attemptCharCode(120)||this._attemptCharCode(88),s=this._getLocation().offset;if(this._attemptCharCodeUntilFn(kt),59!==this._peek)throw this._createError(Et(this._peek),this._getSpan());this._advance();var o=this._input.substring(s,this._index-1);try{var a=parseInt(o,r?16:10);return String.fromCharCode(a)}catch(u){var h=this._input.substring(t.offset+1,this._index-1);throw this._createError(Ct(h),this._getSpan(t))}},t.prototype._consumeRawText=function(t,e,n){var i,r=this._getLocation();this._beginToken(t?vt.ESCAPABLE_RAW_TEXT:vt.RAW_TEXT,r);for(var s=[];i=this._getLocation(),!this._attemptCharCode(e)||!n();)for(this._index>i.offset&&s.push(this._input.substring(i.offset,this._index));this._peek!==e;)s.push(this._readChar(t));return this._endToken([this._processCarriageReturns(s.join(""))],i)},t.prototype._consumeComment=function(t){var e=this;this._beginToken(vt.COMMENT_START,t),this._requireCharCode(q),this._endToken([]);var n=this._consumeRawText(!1,q,function(){return e._attemptStr("->")});this._beginToken(vt.COMMENT_END,n.sourceSpan.end),this._endToken([])},t.prototype._consumeCdata=function(t){var e=this;this._beginToken(vt.CDATA_START,t),this._requireStr("CDATA["),this._endToken([]);var n=this._consumeRawText(!1,93,function(){return e._attemptStr("]>")});this._beginToken(vt.CDATA_END,n.sourceSpan.end),this._endToken([])},t.prototype._consumeDocType=function(t){this._beginToken(vt.DOC_TYPE,t),this._attemptUntilChar(62),this._advance(),this._endToken([this._input.substring(t.offset+2,this._index-1)])},t.prototype._consumePrefixAndName=function(){for(var t,e,n=this._index,i=null;58!==this._peek&&!(((t=this._peek)<Q||it<t)&&(t<H||z<t)&&(t<K||j<t));)this._advance();return 58===this._peek?(this._advance(),i=this._input.substring(n,this._index-1),e=this._index):e=n,this._requireCharCodeUntilFn(At,this._index===e?1:0),[i,this._input.substring(e,this._index)]},t.prototype._consumeTagOpen=function(t){var e,n,i=this._savePosition();try{if(!pt(this._peek))throw this._createError(Et(this._peek),this._getSpan());var r=this._index;for(this._consumeTagOpenStart(t),n=(e=this._input.substring(r,this._index)).toLowerCase(),this._attemptCharCodeUntilFn(wt);47!==this._peek&&62!==this._peek;)this._consumeAttributeName(),this._attemptCharCodeUntilFn(wt),this._attemptCharCode(61)&&(this._attemptCharCodeUntilFn(wt),this._consumeAttributeValue()),this._attemptCharCodeUntilFn(wt);this._consumeTagOpenEnd()}catch(o){if(o instanceof St)return this._restorePosition(i),this._beginToken(vt.TEXT,t),void this._endToken(["<"]);throw o}var s=this._getTagDefinition(e).contentType;s===ct.RAW_TEXT?this._consumeRawTextWithTagClose(n,!1):s===ct.ESCAPABLE_RAW_TEXT&&this._consumeRawTextWithTagClose(n,!0)},t.prototype._consumeRawTextWithTagClose=function(t,e){var n=this,i=this._consumeRawText(e,60,function(){return!!n._attemptCharCode(47)&&(n._attemptCharCodeUntilFn(wt),!!n._attemptStrCaseInsensitive(t)&&(n._attemptCharCodeUntilFn(wt),n._attemptCharCode(62)))});this._beginToken(vt.TAG_CLOSE,i.sourceSpan.end),this._endToken([null,t])},t.prototype._consumeTagOpenStart=function(t){this._beginToken(vt.TAG_OPEN_START,t);var e=this._consumePrefixAndName();this._endToken(e)},t.prototype._consumeAttributeName=function(){this._beginToken(vt.ATTR_NAME);var t=this._consumePrefixAndName();this._endToken(t)},t.prototype._consumeAttributeValue=function(){var t;if(this._beginToken(vt.ATTR_VALUE),this._peek===U||this._peek===B){var e=this._peek;this._advance();for(var n=[];this._peek!==e;)n.push(this._readChar(!0));t=n.join(""),this._advance()}else{var i=this._index;this._requireCharCodeUntilFn(At,1),t=this._input.substring(i,this._index)}this._endToken([this._processCarriageReturns(t)])},t.prototype._consumeTagOpenEnd=function(){var t=this._attemptCharCode(47)?vt.TAG_OPEN_END_VOID:vt.TAG_OPEN_END;this._beginToken(t),this._requireCharCode(62),this._endToken([])},t.prototype._consumeTagClose=function(t){this._beginToken(vt.TAG_CLOSE,t),this._attemptCharCodeUntilFn(wt);var e=this._consumePrefixAndName();this._attemptCharCodeUntilFn(wt),this._requireCharCode(62),this._endToken(e)},t.prototype._consumeExpansionFormStart=function(){this._beginToken(vt.EXPANSION_FORM_START,this._getLocation()),this._requireCharCode(rt),this._endToken([]),this._expansionCaseStack.push(vt.EXPANSION_FORM_START),this._beginToken(vt.RAW_TEXT,this._getLocation());var t=this._readUntil(F);this._endToken([t],this._getLocation()),this._requireCharCode(F),this._attemptCharCodeUntilFn(wt),this._beginToken(vt.RAW_TEXT,this._getLocation());var e=this._readUntil(F);this._endToken([e],this._getLocation()),this._requireCharCode(F),this._attemptCharCodeUntilFn(wt)},t.prototype._consumeExpansionCaseStart=function(){this._beginToken(vt.EXPANSION_CASE_VALUE,this._getLocation());var t=this._readUntil(rt).trim();this._endToken([t],this._getLocation()),this._attemptCharCodeUntilFn(wt),this._beginToken(vt.EXPANSION_CASE_EXP_START,this._getLocation()),this._requireCharCode(rt),this._endToken([],this._getLocation()),this._attemptCharCodeUntilFn(wt),this._expansionCaseStack.push(vt.EXPANSION_CASE_EXP_START)},t.prototype._consumeExpansionCaseEnd=function(){this._beginToken(vt.EXPANSION_CASE_EXP_END,this._getLocation()),this._requireCharCode(st),this._endToken([],this._getLocation()),this._attemptCharCodeUntilFn(wt),this._expansionCaseStack.pop()},t.prototype._consumeExpansionFormEnd=function(){this._beginToken(vt.EXPANSION_FORM_END,this._getLocation()),this._requireCharCode(st),this._endToken([]),this._expansionCaseStack.pop()},t.prototype._consumeText=function(){var t=this._getLocation();this._beginToken(vt.TEXT,t);for(var e=[];this._interpolationConfig&&this._attemptStr(this._interpolationConfig.start)?(e.push(this._interpolationConfig.start),this._inInterpolation=!0):this._interpolationConfig&&this._inInterpolation&&this._attemptStr(this._interpolationConfig.end)?(e.push(this._interpolationConfig.end),this._inInterpolation=!1):e.push(this._readChar(!0)),!this._isTextEnd(););this._endToken([this._processCarriageReturns(e.join(""))])},t.prototype._isTextEnd=function(){if(60===this._peek||0===this._peek)return!0;if(this._tokenizeIcu&&!this._inInterpolation){if(Pt(this._input,this._index,this._interpolationConfig))return!0;if(this._peek===st&&this._isInExpansionCase())return!0}return!1},t.prototype._savePosition=function(){return[this._peek,this._index,this._column,this._line,this.tokens.length]},t.prototype._readUntil=function(t){var e=this._index;return this._attemptUntilChar(t),this._input.substring(e,this._index)},t.prototype._restorePosition=function(t){this._peek=t[0],this._index=t[1],this._column=t[2],this._line=t[3];var e=t[4];e<this.tokens.length&&(this.tokens=this.tokens.slice(0,e))},t.prototype._isInExpansionCase=function(){return 0<this._expansionCaseStack.length&&this._expansionCaseStack[this._expansionCaseStack.length-1]===vt.EXPANSION_CASE_EXP_START},t.prototype._isInExpansionForm=function(){return 0<this._expansionCaseStack.length&&this._expansionCaseStack[this._expansionCaseStack.length-1]===vt.EXPANSION_FORM_START},t}();function wt(t){return!ht(t)||0===t}function At(t){return ht(t)||62===t||47===t||t===U||t===B||61===t}function kt(t){return 59===t||0===t||!(Q<=(e=t)&&e<=Z||H<=e&&e<=G||ut(e));var e}function Nt(t){return 59===t||0===t||!pt(t)}function Pt(t,e,n){var i=!!n&&t.indexOf(n.start,e)===e;return t.charCodeAt(e)===rt&&!i}function It(t){return Q<=t&&t<=it?t-Q+H:t}var bt=function(r){function i(t,e,n){var i=r.call(this,e,n)||this;return i.elementName=t,i}return o(i,r),i.create=function(t,e,n){return new i(t,e,n)},i}(A),Ot=function(t,e){this.rootNodes=t,this.errors=e},Rt=function(){function t(t){this.getTagDefinition=t}return t.prototype.parse=function(t,e,n,i){void 0===n&&(n=!1),void 0===i&&(i=P);var r,s,o,a,h,u=(r=t,s=e,o=this.getTagDefinition,void 0===(a=n)&&(a=!1),void 0===(h=i)&&(h=P),new xt(new C(r,s),o,a,h).tokenize()),p=new Lt(u.tokens,this.getTagDefinition).build();return new Ot(p.rootNodes,u.errors.concat(p.errors))},t}(),Lt=function(){function a(t,e){this.tokens=t,this.getTagDefinition=e,this._index=-1,this._rootNodes=[],this._errors=[],this._elementStack=[],this._advance()}return a.prototype.build=function(){for(;this._peek.type!==vt.EOF;)this._peek.type===vt.TAG_OPEN_START?this._consumeStartTag(this._advance()):this._peek.type===vt.TAG_CLOSE?this._consumeEndTag(this._advance()):this._peek.type===vt.CDATA_START?(this._closeVoidElement(),this._consumeCdata(this._advance())):this._peek.type===vt.COMMENT_START?(this._closeVoidElement(),this._consumeComment(this._advance())):this._peek.type===vt.TEXT||this._peek.type===vt.RAW_TEXT||this._peek.type===vt.ESCAPABLE_RAW_TEXT?(this._closeVoidElement(),this._consumeText(this._advance())):this._peek.type===vt.EXPANSION_FORM_START?this._consumeExpansion(this._advance()):this._advance();return new Ot(this._rootNodes,this._errors)},a.prototype._advance=function(){var t=this._peek;return this._index<this.tokens.length-1&&this._index++,this._peek=this.tokens[this._index],t},a.prototype._advanceIf=function(t){return this._peek.type===t?this._advance():null},a.prototype._consumeCdata=function(t){this._consumeText(this._advance()),this._advanceIf(vt.CDATA_END)},a.prototype._consumeComment=function(t){var e=this._advanceIf(vt.RAW_TEXT);this._advanceIf(vt.COMMENT_END);var n=null!==e?e.parts[0].trim():null;this._addToParent(new s(n,t.sourceSpan))},a.prototype._consumeExpansion=function(t){for(var e=this._advance(),n=this._advance(),i=[];this._peek.type===vt.EXPANSION_CASE_VALUE;){var r=this._parseExpansionCase();if(!r)return;i.push(r)}if(this._peek.type===vt.EXPANSION_FORM_END){var s=new S(t.sourceSpan.start,this._peek.sourceSpan.end);this._addToParent(new p(e.parts[0],n.parts[0],i,s,e.sourceSpan)),this._advance()}else this._errors.push(bt.create(null,this._peek.sourceSpan,"Invalid ICU message. Missing '}'."))},a.prototype._parseExpansionCase=function(){var t=this._advance();if(this._peek.type!==vt.EXPANSION_CASE_EXP_START)return this._errors.push(bt.create(null,this._peek.sourceSpan,"Invalid ICU message. Missing '{'.")),null;var e=this._advance(),n=this._collectExpansionExpTokens(e);if(!n)return null;var i=this._advance();n.push(new gt(vt.EOF,[],i.sourceSpan));var r=new a(n,this.getTagDefinition).build();if(0<r.errors.length)return this._errors=this._errors.concat(r.errors),null;var s=new S(t.sourceSpan.start,i.sourceSpan.end),o=new S(e.sourceSpan.start,i.sourceSpan.end);return new h(t.parts[0],r.rootNodes,s,t.sourceSpan,o)},a.prototype._collectExpansionExpTokens=function(t){for(var e=[],n=[vt.EXPANSION_CASE_EXP_START];;){if(this._peek.type!==vt.EXPANSION_FORM_START&&this._peek.type!==vt.EXPANSION_CASE_EXP_START||n.push(this._peek.type),this._peek.type===vt.EXPANSION_CASE_EXP_END){if(!Mt(n,vt.EXPANSION_CASE_EXP_START))return this._errors.push(bt.create(null,t.sourceSpan,"Invalid ICU message. Missing '}'.")),null;if(n.pop(),0===n.length)return e}if(this._peek.type===vt.EXPANSION_FORM_END){if(!Mt(n,vt.EXPANSION_FORM_START))return this._errors.push(bt.create(null,t.sourceSpan,"Invalid ICU message. Missing '}'.")),null;n.pop()}if(this._peek.type===vt.EOF)return this._errors.push(bt.create(null,t.sourceSpan,"Invalid ICU message. Missing '}'.")),null;e.push(this._advance())}},a.prototype._consumeText=function(t){var e=t.parts[0];if(0<e.length&&"\n"===e[0]){var n=this._getParentElement();null!==n&&0===n.children.length&&this.getTagDefinition(n.name).ignoreFirstLf&&(e=e.substring(1))}0<e.length&&this._addToParent(new r(e,t.sourceSpan))},a.prototype._closeVoidElement=function(){var t=this._getParentElement();t&&this.getTagDefinition(t.name).isVoid&&this._elementStack.pop()},a.prototype._consumeStartTag=function(t){for(var e=t.parts[0],n=t.parts[1],i=[];this._peek.type===vt.ATTR_NAME;)i.push(this._consumeAttr(this._advance()));var r=this._getElementFullName(e,n,this._getParentElement()),s=!1;if(this._peek.type===vt.TAG_OPEN_END_VOID){this._advance(),s=!0;var o=this.getTagDefinition(r);o.canSelfClose||null!==dt(r)||o.isVoid||this._errors.push(bt.create(r,t.sourceSpan,'Only void and foreign elements can be self closed "'+t.parts[1]+'"'))}else this._peek.type===vt.TAG_OPEN_END&&(this._advance(),s=!1);var a=this._peek.sourceSpan.start,h=new S(t.sourceSpan.start,a),u=new l(r,i,[],h,h,undefined);this._pushElement(u),s&&(this._popElement(r),u.endSourceSpan=h)},a.prototype._pushElement=function(t){var e=this._getParentElement();e&&this.getTagDefinition(e.name).isClosedByChild(t.name)&&this._elementStack.pop();var n=this.getTagDefinition(t.name),i=this._getParentElementSkippingContainers(),r=i.parent,s=i.container;if(r&&n.requireExtraParent(r.name)){var o=new l(n.parentToAdd,[],[],t.sourceSpan,t.startSourceSpan,t.endSourceSpan);this._insertBeforeContainer(r,s,o)}this._addToParent(t),this._elementStack.push(t)},a.prototype._consumeEndTag=function(t){var e=this._getElementFullName(t.parts[0],t.parts[1],this._getParentElement());if(this._getParentElement()&&(this._getParentElement().endSourceSpan=t.sourceSpan),this.getTagDefinition(e).isVoid)this._errors.push(bt.create(e,t.sourceSpan,'Void elements do not have end tags "'+t.parts[1]+'"'));else if(!this._popElement(e)){var n='Unexpected closing tag "'+e+'". It may happen when the tag has already been closed by another tag. For more info see https://www.w3.org/TR/html5/syntax.html#closing-elements-that-have-implied-end-tags';this._errors.push(bt.create(e,t.sourceSpan,n))}},a.prototype._popElement=function(t){for(var e=this._elementStack.length-1;0<=e;e--){var n=this._elementStack[e];if(n.name===t)return this._elementStack.splice(e,this._elementStack.length-e),!0;if(!this.getTagDefinition(n.name).closedByParent)return!1}return!1},a.prototype._consumeAttr=function(t){var e=ft(t.parts[0],t.parts[1]),n=t.sourceSpan.end,i="",r=undefined;if(this._peek.type===vt.ATTR_VALUE){var s=this._advance();i=s.parts[0],n=s.sourceSpan.end,r=s.sourceSpan}return new c(e,i,new S(t.sourceSpan.start,n),r)},a.prototype._getParentElement=function(){return 0<this._elementStack.length?this._elementStack[this._elementStack.length-1]:null},a.prototype._getParentElementSkippingContainers=function(){for(var t=null,e=this._elementStack.length-1;0<=e;e--){if("ng-container"!==lt(this._elementStack[e].name)[1])return{parent:this._elementStack[e],container:t};t=this._elementStack[e]}return{parent:null,container:t}},a.prototype._addToParent=function(t){var e=this._getParentElement();null!==e?e.children.push(t):this._rootNodes.push(t)},a.prototype._insertBeforeContainer=function(t,e,n){if(e){if(t){var i=t.children.indexOf(e);t.children[i]=n}else this._rootNodes.push(n);n.children.push(e),this._elementStack.splice(this._elementStack.indexOf(e),0,n)}else this._addToParent(n),this._elementStack.push(n)},a.prototype._getElementFullName=function(t,e,n){return null===t&&null===(t=this.getTagDefinition(e).implicitNamespacePrefix)&&null!==n&&(t=dt(n.name)),ft(t,e)},a}();function Mt(t,e){return 0<t.length&&t[t.length-1]===e}var Bt=new(function(){function t(){this.closedByParent=!1,this.contentType=ct.PARSABLE_DATA,this.isVoid=!1,this.ignoreFirstLf=!1,this.canSelfClose=!0}return t.prototype.requireExtraParent=function(t){return!1},t.prototype.isClosedByChild=function(t){return!1},t}());function Dt(t){return Bt}var Ut=function(){function t(t){var e=void 0===t?{}:t,n=e.closedByChildren,i=e.requiredParents,r=e.implicitNamespacePrefix,s=e.contentType,o=void 0===s?ct.PARSABLE_DATA:s,a=e.closedByParent,h=void 0!==a&&a,u=e.isVoid,p=void 0!==u&&u,c=e.ignoreFirstLf,l=void 0!==c&&c,d=this;this.closedByChildren={},this.closedByParent=!1,this.canSelfClose=!1,n&&0<n.length&&n.forEach(function(t){return d.closedByChildren[t]=!0}),this.isVoid=p,this.closedByParent=h||p,i&&0<i.length&&(this.requiredParents={},this.parentToAdd=i[0],i.forEach(function(t){return d.requiredParents[t]=!0})),this.implicitNamespacePrefix=r||null,this.contentType=o,this.ignoreFirstLf=l}return t.prototype.requireExtraParent=function(t){if(!this.requiredParents)return!1;if(!t)return!0;var e=t.toLowerCase();return!("template"===e||"ng-template"===t)&&!0!==this.requiredParents[e]},t.prototype.isClosedByChild=function(t){return this.isVoid||t.toLowerCase()in this.closedByChildren},t}(),Xt={base:new Ut({isVoid:!0}),meta:new Ut({isVoid:!0}),area:new Ut({isVoid:!0}),embed:new Ut({isVoid:!0}),link:new Ut({isVoid:!0}),img:new Ut({isVoid:!0}),input:new Ut({isVoid:!0}),param:new Ut({isVoid:!0}),hr:new Ut({isVoid:!0}),br:new Ut({isVoid:!0}),source:new Ut({isVoid:!0}),track:new Ut({isVoid:!0}),wbr:new Ut({isVoid:!0}),p:new Ut({closedByChildren:["address","article","aside","blockquote","div","dl","fieldset","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","main","nav","ol","p","pre","section","table","ul"],closedByParent:!0}),thead:new Ut({closedByChildren:["tbody","tfoot"]}),tbody:new Ut({closedByChildren:["tbody","tfoot"],closedByParent:!0}),tfoot:new Ut({closedByChildren:["tbody"],closedByParent:!0}),tr:new Ut({closedByChildren:["tr"],requiredParents:["tbody","tfoot","thead"],closedByParent:!0}),td:new Ut({closedByChildren:["td","th"],closedByParent:!0}),th:new Ut({closedByChildren:["td","th"],closedByParent:!0}),col:new Ut({requiredParents:["colgroup"],isVoid:!0}),svg:new Ut({implicitNamespacePrefix:"svg"}),math:new Ut({implicitNamespacePrefix:"math"}),li:new Ut({closedByChildren:["li"],closedByParent:!0}),dt:new Ut({closedByChildren:["dt","dd"]}),dd:new Ut({closedByChildren:["dt","dd"],closedByParent:!0}),rb:new Ut({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),rt:new Ut({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),rtc:new Ut({closedByChildren:["rb","rtc","rp"],closedByParent:!0}),rp:new Ut({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),optgroup:new Ut({closedByChildren:["optgroup"],closedByParent:!0}),option:new Ut({closedByChildren:["option","optgroup"],closedByParent:!0}),pre:new Ut({ignoreFirstLf:!0}),listing:new Ut({ignoreFirstLf:!0}),style:new Ut({contentType:ct.RAW_TEXT}),script:new Ut({contentType:ct.RAW_TEXT}),title:new Ut({contentType:ct.ESCAPABLE_RAW_TEXT}),textarea:new Ut({contentType:ct.ESCAPABLE_RAW_TEXT,ignoreFirstLf:!0})},Vt=new Ut;function Ft(t){return Xt[t.toLowerCase()]||Vt}var qt=function(i){function t(t,e){var n=i.call(this)||this;return n.mapName=e,n.internalToPublic={},n.publicToNextId={},n.publicToInternal={},t.nodes.forEach(function(t){return t.visit(n)}),n}return o(t,i),t.prototype.toPublicName=function(t){return this.internalToPublic.hasOwnProperty(t)?this.internalToPublic[t]:null},t.prototype.toInternalName=function(t){return this.publicToInternal.hasOwnProperty(t)?this.publicToInternal[t]:null},t.prototype.visitText=function(t,e){return null},t.prototype.visitTagPlaceholder=function(t,e){this.visitPlaceholderName(t.startName),i.prototype.visitTagPlaceholder.call(this,t,e),this.visitPlaceholderName(t.closeName)},t.prototype.visitPlaceholder=function(t,e){this.visitPlaceholderName(t.name)},t.prototype.visitIcuPlaceholder=function(t,e){this.visitPlaceholderName(t.name)},t.prototype.visitPlaceholderName=function(t){if(t&&!this.internalToPublic.hasOwnProperty(t)){var e=this.mapName(t);if(this.publicToInternal.hasOwnProperty(e)){var n=this.publicToNextId[e];this.publicToNextId[e]=n+1,e=e+"_"+n}else this.publicToNextId[e]=1;this.internalToPublic[t]=e,this.publicToInternal[e]=t}},t}(e),Kt=new n.I18nSelectPipe,jt=function(){function t(t,e){this.params=e,this.i18nPluralPipe=new n.I18nPluralPipe(new n.NgLocaleLocalization(t))}return t.prototype.visitElement=function(t,e){return Ft(t.name).isVoid?"<"+t.name+this.serializeNodes(t.attrs," ")+"/>":"<"+t.name+this.serializeNodes(t.attrs," ")+">"+this.serializeNodes(t.children)+"</"+t.name+">"},t.prototype.visitAttribute=function(t,e){return t.name+'="'+t.value+'"'},t.prototype.visitText=function(t,e){return t.value},t.prototype.visitComment=function(t,e){return"\x3c!--"+t.value+"--\x3e"},t.prototype.visitExpansion=function(t,e){var n=this,i={};switch(t.cases.forEach(function(t){return i[t.value]=n.serializeNodes(t.expression)}),t.type){case"select":return Kt.transform(this.params[t.switchValue]||"",i);case"plural":return this.i18nPluralPipe.transform(this.params[t.switchValue],i)}throw new Error('Unknown expansion type "'+t.type+'"')},t.prototype.visitExpansionCase=function(t,e){return" "+t.value+" {"+this.serializeNodes(t.expression)+"}"},t.prototype.serializeNodes=function(t,e){var n=this;return void 0===e&&(e=""),0===t.length?"":e+t.map(function(t){return t.visit(n,null)}).join(e)},t}();function Ht(t){return t.id||function(t){var e,n,i=ue(t),r=function(t,e){for(var n=Array(t.length+3>>>2),i=0;i<n.length;i++)n[i]=se(t,4*i,e);return n}(i,Jt.Big),s=8*i.length,o=new Array(80),a=w([1732584193,4023233417,2562383102,271733878,3285377520],5),h=a[0],u=a[1],p=a[2],c=a[3],l=a[4];r[s>>5]|=128<<24-s%32,r[15+(s+64>>9<<4)]=s;for(var d=0;d<r.length;d+=16){for(var f=w([h,u,p,c,l],5),_=f[0],v=f[1],g=f[2],m=f[3],y=f[4],T=0;T<80;T++){o[T]=T<16?r[d+T]:ie(o[T-3]^o[T-8]^o[T-14]^o[T-16],1);var E=w(Yt(T,u,p,c),2),C=E[0],S=E[1],x=[ie(h,5),C,l,S,o[T]].reduce(te);e=w([c,p,ie(u,30),h,x],5),l=e[0],c=e[1],p=e[2],u=e[3],h=e[4]}n=w([te(h,_),te(u,v),te(p,g),te(c,m),te(l,y)],5),h=n[0],u=n[1],p=n[2],c=n[3],l=n[4]}return function(t){for(var e="",n=0;n<t.length;n++){var i=re(t,n);e+=(i>>>4).toString(16)+(15&i).toString(16)}return e.toLowerCase()}(oe([h,u,p,c,l]))}((e=t.nodes,e.map(function(t){return t.visit(Gt,null)})).join("")+"["+t.meaning+"]");var e}var Wt=function(){function t(){}return t.prototype.visitText=function(t,e){return t.value},t.prototype.visitContainer=function(t,e){var n=this;return"["+t.children.map(function(t){return t.visit(n)}).join(", ")+"]"},t.prototype.visitIcu=function(e,t){var n=this,i=Object.keys(e.cases).map(function(t){return t+" {"+e.cases[t].visit(n)+"}"});return"{"+e.expression+", "+e.type+", "+i.join(", ")+"}"},t.prototype.visitTagPlaceholder=function(t,e){var n=this;return t.isVoid?'<ph tag name="'+t.startName+'"/>':'<ph tag name="'+t.startName+'">'+t.children.map(function(t){return t.visit(n)}).join(", ")+'</ph name="'+t.closeName+'">'},t.prototype.visitPlaceholder=function(t,e){return t.value?'<ph name="'+t.name+'">'+t.value+"</ph>":'<ph name="'+t.name+'"/>'},t.prototype.visitIcuPlaceholder=function(t,e){return'<ph icu name="'+t.name+'">'+t.value.visit(this)+"</ph>"},t}(),Gt=new Wt;var zt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.visitIcu=function(e,t){var n=this,i=Object.keys(e.cases).map(function(t){return t+" {"+e.cases[t].visit(n)+"}"});return"{"+e.type+", "+i.join(", ")+"}"},e}(Wt);function Yt(t,e,n,i){return t<20?[e&n|~e&i,1518500249]:t<40?[e^n^i,1859775393]:t<60?[e&n|e&i|n&i,2400959708]:[e^n^i,3395469782]}function Qt(t){var e=ue(t),n=w([$t(e,0),$t(e,102072)],2),i=n[0],r=n[1];return 0!==i||0!==r&&1!==r||(i^=319790063,r^=-1801410264),[i,r]}function $t(t,e){var n,i,r=w([2654435769,2654435769],2),s=r[0],o=r[1],a=t.length;for(n=0;n+12<=a;n+=12)s=(i=w(Zt([s=te(s,se(t,n,Jt.Little)),o=te(o,se(t,n+4,Jt.Little)),e=te(e,se(t,n+8,Jt.Little))]),3))[0],o=i[1],e=i[2];return Zt([s=te(s,se(t,n,Jt.Little)),o=te(o,se(t,n+4,Jt.Little)),e=te(e=te(e,a),se(t,n+8,Jt.Little)<<8)])[2]}function Zt(t){var e=w(t,3),n=e[0],i=e[1],r=e[2];return n=ne(n=ne(n,i),r),n^=r>>>13,i=ne(i=ne(i,r),n),i^=n<<8,r=ne(r=ne(r,n),i),r^=i>>>13,n=ne(n=ne(n,i),r),n^=r>>>12,i=ne(i=ne(i,r),n),i^=n<<16,r=ne(r=ne(r,n),i),r^=i>>>5,n=ne(n=ne(n,i),r),n^=r>>>3,i=ne(i=ne(i,r),n),i^=n<<10,r=ne(r=ne(r,n),i),[n,i,r^=i>>>15]}var Jt={Little:0,Big:1};function te(t,e){return ee(t,e)[1]}function ee(t,e){var n=(65535&t)+(65535&e),i=(t>>>16)+(e>>>16)+(n>>>16);return[i>>>16,i<<16|65535&n]}function ne(t,e){var n=(65535&t)-(65535&e);return(t>>16)-(e>>16)+(n>>16)<<16|65535&n}function ie(t,e){return t<<e|t>>>32-e}function re(t,e){return e>=t.length?0:255&t.charCodeAt(e)}function se(t,e,n){var i=0;if(n===Jt.Big)for(var r=0;r<4;r++)i+=re(t,e+r)<<24-8*r;else for(r=0;r<4;r++)i+=re(t,e+r)<<8*r;return i}function oe(t){return t.reduce(function(t,e){return t+function(t){for(var e="",n=0;n<4;n++)e+=String.fromCharCode(t>>>8*(3-n)&255);return e}(e)},"")}function ae(t,e){for(var n="",i=Math.max(t.length,e.length),r=0,s=0;r<i||s;r++){var o=s+ +(t[r]||0)+ +(e[r]||0);10<=o?(s=1,n+=o-10):(s=0,n+=o)}return n}function he(t,e){for(var n="",i=e;0!==t;t>>>=1)1&t&&(n=ae(n,i)),i=ae(i,i);return n}function ue(t){for(var e="",n=0;n<t.length;n++){var i=t.charCodeAt(n);if(55296<=i&&i<=56319&&t.length>n+1){var r=t.charCodeAt(n+1);56320<=r&&r<=57343&&(n++,i=(i-55296<<10)+r-56320+65536)}i<=127?e+=String.fromCharCode(i):i<=2047?e+=String.fromCharCode(i>>6&31|192,63&i|128):i<=65535?e+=String.fromCharCode(i>>12|224,i>>6&63|128,63&i|128):i<=2097151&&(e+=String.fromCharCode(i>>18&7|240,i>>12&63|128,i>>6&63|128,63&i|128))}return e}Jt[Jt.Little]="Little",Jt[Jt.Big]="Big";var pe="trans-unit";function ce(t){var e=(new de).parse(t),r=e.msgIdToHtml,s=e.errors,o={},a=new fe;if(Object.keys(r).forEach(function(t){var e=a.convert(r[t]),n=e.i18nNodes,i=e.errors;s.push.apply(s,u(i)),o[t]=n}),s.length)throw new Error("xliff parse errors:\n"+s.join("\n"));return o}var le=Ht,de=function(){function t(){}return t.prototype.parse=function(t){this._unitMlString=null,this._msgIdToHtml={};var e=new Rt(Dt).parse(t,"",!1);return this._errors=e.errors,d(this,e.rootNodes,null),{msgIdToHtml:this._msgIdToHtml,errors:this._errors}},t.prototype.visitElement=function(t,e){switch(t.name){case pe:this._unitMlString=null;var n=t.attrs.find(function(t){return"id"===t.name});if(n){var i=n.value;this._msgIdToHtml.hasOwnProperty(i)?this._addError(t,"Duplicated translations for msg "+i):(d(this,t.children,null),"string"==typeof this._unitMlString?this._msgIdToHtml[i]=this._unitMlString:this._addError(t,"Message "+i+" misses a translation"))}else this._addError(t,"<"+pe+'> misses the "id" attribute');break;case"source":break;case"target":var r=t.startSourceSpan.end.offset,s=t.endSourceSpan.start.offset,o=t.startSourceSpan.start.file.content.slice(r,s);this._unitMlString=o;break;case"file":d(this,t.children,null);break;default:d(this,t.children,null)}},t.prototype.visitAttribute=function(t,e){},t.prototype.visitText=function(t,e){},t.prototype.visitComment=function(t,e){},t.prototype.visitExpansion=function(t,e){},t.prototype.visitExpansionCase=function(t,e){},t.prototype._addError=function(t,e){this._errors.push(new k(t.sourceSpan,e))},t}(),fe=function(){function t(){}return t.prototype.convert=function(t){var e=new Rt(Dt).parse(t,"",!0);return this._errors=e.errors,{i18nNodes:0<this._errors.length||0===e.rootNodes.length?[]:d(this,e.rootNodes),errors:this._errors}},t.prototype.visitText=function(t,e){return new _(t.value,t.sourceSpan)},t.prototype.visitElement=function(t,e){if("x"===t.name){var n=t.attrs.find(function(t){return"id"===t.name});if(n)return new y("",n.value,t.sourceSpan);this._addError(t,'<x> misses the "id" attribute')}else this._addError(t,"Unexpected tag");return null},t.prototype.visitExpansion=function(e,t){var n={};return d(this,e.cases).forEach(function(t){n[t.value]=new v(t.nodes,e.sourceSpan)}),new g(e.switchValue,e.type,n,e.sourceSpan)},t.prototype.visitExpansionCase=function(t,e){return{value:t.value,nodes:d(this,t.expression)}},t.prototype.visitComment=function(t,e){},t.prototype.visitAttribute=function(t,e){},t.prototype._addError=function(t,e){this._errors.push(new k(t.sourceSpan,e))},t}();function _e(t){var e=(new ge).parse(t),r=e.msgIdToHtml,s=e.errors,o={},a=new me;if(Object.keys(r).forEach(function(t){var e=a.convert(r[t]),n=e.i18nNodes,i=e.errors;s.push.apply(s,u(i)),o[t]=n}),s.length)throw new Error("xliff2 parse errors:\n"+s.join("\n"));return o}var ve=function(t){if(t.id)return t.id;var e=new zt;return function(t,e){var n,i,r,s,o,a,h,u,p,c,l,d,f,_,v,g=w(Qt(t),2),m=g[0],y=g[1];if(e){var T=w(Qt(e),2),E=T[0],C=T[1];n=w((d=1,f=w([m,y],2),_=f[0],v=f[1],i=[E,C],r=w([_<<d|v>>>32-d,v<<d|_>>>32-d],2),s=r[0],o=r[1],a=w(i,2),h=a[0],u=a[1],p=w(ee(o,u),2),c=p[0],l=p[1],[te(te(s,h),c),l]),2),m=n[0],y=n[1]}return function(t){for(var e="",n="1",i=t.length-1;0<=i;i--)e=ae(e,he(re(t,i),n)),n=he(256,n);return e.split("").reverse().join("")}(oe([2147483647&m,y]))}(t.nodes.map(function(t){return t.visit(e,null)}).join(""),t.meaning)},ge=function(){function t(){}return t.prototype.parse=function(t){this._unitMlString=null,this._msgIdToHtml={};var e=new Rt(Dt).parse(t,"",!1);return this._errors=e.errors,d(this,e.rootNodes,null),{msgIdToHtml:this._msgIdToHtml,errors:this._errors}},t.prototype.visitElement=function(t,e){switch(t.name){case"unit":this._unitMlString=null;var n=t.attrs.find(function(t){return"id"===t.name});if(n){var i=n.value;this._msgIdToHtml.hasOwnProperty(i)?this._addError(t,"Duplicated translations for msg "+i):(d(this,t.children,null),"string"==typeof this._unitMlString?this._msgIdToHtml[i]=this._unitMlString:this._addError(t,"Message "+i+" misses a translation"))}else this._addError(t,'<unit> misses the "id" attribute');break;case"source":break;case"target":var r=t.startSourceSpan.end.offset,s=t.endSourceSpan.start.offset,o=t.startSourceSpan.start.file.content.slice(r,s);this._unitMlString=o;break;case"xliff":var a=t.attrs.find(function(t){return"version"===t.name});if(a){var h=a.value;"2.0"!==h?this._addError(t,"The XLIFF file version "+h+" is not compatible with XLIFF 2.0 serializer"):d(this,t.children,null)}break;default:d(this,t.children,null)}},t.prototype.visitAttribute=function(t,e){},t.prototype.visitText=function(t,e){},t.prototype.visitComment=function(t,e){},t.prototype.visitExpansion=function(t,e){},t.prototype.visitExpansionCase=function(t,e){},t.prototype._addError=function(t,e){this._errors.push(new k(t.sourceSpan,e))},t}(),me=function(){function t(){}return t.prototype.convert=function(t){var e=new Rt(Dt).parse(t,"",!0);return this._errors=e.errors,{i18nNodes:0<this._errors.length||0===e.rootNodes.length?[]:[].concat.apply([],u(d(this,e.rootNodes))),errors:this._errors}},t.prototype.visitText=function(t,e){return new _(t.value,t.sourceSpan)},t.prototype.visitElement=function(t,e){var n=this;switch(t.name){case"ph":var i=t.attrs.find(function(t){return"equiv"===t.name});if(i)return[new y("",i.value,t.sourceSpan)];this._addError(t,'<ph> misses the "equiv" attribute');break;case"pc":var r=t.attrs.find(function(t){return"equivStart"===t.name}),s=t.attrs.find(function(t){return"equivEnd"===t.name});if(r){if(s){var o=r.value,a=s.value,h=[];return h.concat.apply(h,u([new y("",o,t.sourceSpan)],t.children.map(function(t){return t.visit(n,null)}),[new y("",a,t.sourceSpan)]))}this._addError(t,'<ph> misses the "equivEnd" attribute')}else this._addError(t,'<ph> misses the "equivStart" attribute');break;default:this._addError(t,"Unexpected tag")}return null},t.prototype.visitExpansion=function(e,t){var n={};return d(this,e.cases).forEach(function(t){n[t.value]=new v(t.nodes,e.sourceSpan)}),new g(e.switchValue,e.type,n,e.sourceSpan)},t.prototype.visitExpansionCase=function(t,e){return{value:t.value,nodes:[].concat.apply([],u(d(this,t.expression)))}},t.prototype.visitComment=function(t,e){},t.prototype.visitAttribute=function(t,e){},t.prototype._addError=function(t,e){this._errors.push(new k(t.sourceSpan,e))},t}();function ye(t){return t.toUpperCase().replace(/[^A-Z0-9_]/g,"_")}var Te="translationbundle",Ee="translation";function Ce(t){var e=(new we).parse(t),s=e.msgIdToHtml,n=e.errors;if(n.length)throw new Error("xtb parse errors:\n"+n.join("\n"));var o={},a=new Ae;return Object.keys(s).forEach(function(i){var e,n,r;e=o,n=i,r=function(){var t=a.convert(s[i]),e=t.i18nNodes,n=t.errors;if(n.length)throw new Error("xtb parse errors:\n"+n.join("\n"));return e},Object.defineProperty(e,n,{configurable:!0,enumerable:!0,get:function(){var t=r();return Object.defineProperty(e,n,{enumerable:!0,value:t}),t},set:function(t){throw new Error("Could not overwrite an XTB translation")}})}),o}var Se=Ht,xe=function(t){return new qt(t,ye)};var we=function(){function t(){}return t.prototype.parse=function(t){this._bundleDepth=0,this._msgIdToHtml={};var e=new Rt(Dt).parse(t,"",!1);return this._errors=e.errors,d(this,e.rootNodes),{msgIdToHtml:this._msgIdToHtml,errors:this._errors}},t.prototype.visitElement=function(t,e){switch(t.name){case Te:this._bundleDepth++,1<this._bundleDepth&&this._addError(t,"<"+Te+"> elements can not be nested"),d(this,t.children,null),this._bundleDepth--;break;case Ee:var n=t.attrs.find(function(t){return"id"===t.name});if(n){var i=n.value;if(this._msgIdToHtml.hasOwnProperty(i))this._addError(t,"Duplicated translations for msg "+i);else{var r=t.startSourceSpan.end.offset,s=t.endSourceSpan.start.offset,o=t.startSourceSpan.start.file.content.slice(r,s);this._msgIdToHtml[i]=o}}else this._addError(t,"<"+Ee+'> misses the "id" attribute');break;default:this._addError(t,"Unexpected tag")}},t.prototype.visitAttribute=function(t,e){},t.prototype.visitText=function(t,e){},t.prototype.visitComment=function(t,e){},t.prototype.visitExpansion=function(t,e){},t.prototype.visitExpansionCase=function(t,e){},t.prototype._addError=function(t,e){this._errors.push(new k(t.sourceSpan,e))},t}(),Ae=function(){function t(){}return t.prototype.convert=function(t){var e=new Rt(Dt).parse(t,"",!0);return this._errors=e.errors,{i18nNodes:0<this._errors.length||0===e.rootNodes.length?[]:d(this,e.rootNodes),errors:this._errors}},t.prototype.visitText=function(t,e){return new _(t.value,t.sourceSpan)},t.prototype.visitExpansion=function(e,t){var n={};return d(this,e.cases).forEach(function(t){n[t.value]=new v(t.nodes,e.sourceSpan)}),new g(e.switchValue,e.type,n,e.sourceSpan)},t.prototype.visitExpansionCase=function(t,e){return{value:t.value,nodes:d(this,t.expression)}},t.prototype.visitElement=function(t,e){if("ph"===t.name){var n=t.attrs.find(function(t){return"name"===t.name});if(n)return new y("",n.value,t.sourceSpan);this._addError(t,'<ph> misses the "name" attribute')}else this._addError(t,"Unexpected tag");return null},t.prototype.visitComment=function(t,e){},t.prototype.visitAttribute=function(t,e){},t.prototype._addError=function(t,e){this._errors.push(new k(t.sourceSpan,e))},t}(),ke=function(t,e,n,i){this.input=e,this.errLocation=n,this.ctxLocation=i,this.message="Parser Error: "+t+" "+n+" ["+e+"] in "+i},Ne=function(t,e){this.start=t,this.end=e},Pe=function(){function t(t){this.span=t}return t.prototype.visit=function(t,e){return void 0===e&&(e=null),null},t.prototype.toString=function(){return"AST"},t}(),Ie=function(s){function t(t,e,n,i){var r=s.call(this,t)||this;return r.prefix=e,r.uninterpretedExpression=n,r.location=i,r}return o(t,s),t.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitQuote(this,e)},t.prototype.toString=function(){return"Quote"},t}(Pe),be=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.visit=function(t,e){void 0===e&&(e=null)},e}(Pe),Oe=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitImplicitReceiver(this,e)},e}(Pe),Re=function(i){function t(t,e){var n=i.call(this,t)||this;return n.expressions=e,n}return o(t,i),t.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitChain(this,e)},t}(Pe),Le=function(s){function t(t,e,n,i){var r=s.call(this,t)||this;return r.condition=e,r.trueExp=n,r.falseExp=i,r}return o(t,s),t.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitConditional(this,e)},t}(Pe),Me=function(r){function t(t,e,n){var i=r.call(this,t)||this;return i.receiver=e,i.name=n,i}return o(t,r),t.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitPropertyRead(this,e)},t}(Pe),Be=function(s){function t(t,e,n,i){var r=s.call(this,t)||this;return r.receiver=e,r.name=n,r.value=i,r}return o(t,s),t.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitPropertyWrite(this,e)},t}(Pe),De=function(r){function t(t,e,n){var i=r.call(this,t)||this;return i.receiver=e,i.name=n,i}return o(t,r),t.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitSafePropertyRead(this,e)},t}(Pe),Ue=function(r){function t(t,e,n){var i=r.call(this,t)||this;return i.obj=e,i.key=n,i}return o(t,r),t.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitKeyedRead(this,e)},t}(Pe),Xe=function(s){function t(t,e,n,i){var r=s.call(this,t)||this;return r.obj=e,r.key=n,r.value=i,r}return o(t,s),t.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitKeyedWrite(this,e)},t}(Pe),Ve=function(s){function t(t,e,n,i){var r=s.call(this,t)||this;return r.exp=e,r.name=n,r.args=i,r}return o(t,s),t.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitPipe(this,e)},t}(Pe),Fe=function(i){function t(t,e){var n=i.call(this,t)||this;return n.value=e,n}return o(t,i),t.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitLiteralPrimitive(this,e)},t}(Pe),qe=function(i){function t(t,e){var n=i.call(this,t)||this;return n.expressions=e,n}return o(t,i),t.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitLiteralArray(this,e)},t}(Pe),Ke=function(r){function t(t,e,n){var i=r.call(this,t)||this;return i.keys=e,i.values=n,i}return o(t,r),t.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitLiteralMap(this,e)},t}(Pe),je=function(r){function t(t,e,n){var i=r.call(this,t)||this;return i.strings=e,i.expressions=n,i}return o(t,r),t.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitInterpolation(this,e)},t}(Pe),He=function(s){function t(t,e,n,i){var r=s.call(this,t)||this;return r.operation=e,r.left=n,r.right=i,r}return o(t,s),t.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitBinary(this,e)},t}(Pe),We=function(i){function t(t,e){var n=i.call(this,t)||this;return n.expression=e,n}return o(t,i),t.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitPrefixNot(this,e)},t}(Pe),Ge=function(i){function t(t,e){var n=i.call(this,t)||this;return n.expression=e,n}return o(t,i),t.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitNonNullAssert(this,e)},t}(Pe),ze=function(s){function t(t,e,n,i){var r=s.call(this,t)||this;return r.receiver=e,r.name=n,r.args=i,r}return o(t,s),t.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitMethodCall(this,e)},t}(Pe),Ye=function(s){function t(t,e,n,i){var r=s.call(this,t)||this;return r.receiver=e,r.name=n,r.args=i,r}return o(t,s),t.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitSafeMethodCall(this,e)},t}(Pe),Qe=function(r){function t(t,e,n){var i=r.call(this,t)||this;return i.target=e,i.args=n,i}return o(t,r),t.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitFunctionCall(this,e)},t}(Pe),$e=function(s){function t(t,e,n,i){var r=s.call(this,new Ne(0,null==e?0:e.length))||this;return r.ast=t,r.source=e,r.location=n,r.errors=i,r}return o(t,s),t.prototype.visit=function(t,e){return void 0===e&&(e=null),this.ast.visit(t,e)},t.prototype.toString=function(){return this.source+" in "+this.location},t}(Pe),Ze=function(t,e,n,i,r){this.span=t,this.key=e,this.keyIsVar=n,this.name=i,this.expression=r},Je={Character:0,Identifier:1,Keyword:2,String:3,Operator:4,Number:5,Error:6};Je[Je.Character]="Character",Je[Je.Identifier]="Identifier",Je[Je.Keyword]="Keyword",Je[Je.String]="String",Je[Je.Operator]="Operator",Je[Je.Number]="Number",Je[Je.Error]="Error";var tn=["var","let","as","null","undefined","true","false","if","else","this"],en=function(){function t(){}return t.prototype.tokenize=function(t){for(var e=new an(t),n=[],i=e.scanToken();null!=i;)n.push(i),i=e.scanToken();return n},t}(),nn=function(){function t(t,e,n,i){this.index=t,this.type=e,this.numValue=n,this.strValue=i}return t.prototype.isCharacter=function(t){return this.type===Je.Character&&this.numValue===t},t.prototype.isNumber=function(){return this.type===Je.Number},t.prototype.isString=function(){return this.type===Je.String},t.prototype.isOperator=function(t){return this.type===Je.Operator&&this.strValue===t},t.prototype.isIdentifier=function(){return this.type===Je.Identifier},t.prototype.isKeyword=function(){return this.type===Je.Keyword},t.prototype.isKeywordLet=function(){return this.type===Je.Keyword&&"let"===this.strValue},t.prototype.isKeywordAs=function(){return this.type===Je.Keyword&&"as"===this.strValue},t.prototype.isKeywordNull=function(){return this.type===Je.Keyword&&"null"===this.strValue},t.prototype.isKeywordUndefined=function(){return this.type===Je.Keyword&&"undefined"===this.strValue},t.prototype.isKeywordTrue=function(){return this.type===Je.Keyword&&"true"===this.strValue},t.prototype.isKeywordFalse=function(){return this.type===Je.Keyword&&"false"===this.strValue},t.prototype.isKeywordThis=function(){return this.type===Je.Keyword&&"this"===this.strValue},t.prototype.isError=function(){return this.type===Je.Error},t.prototype.toNumber=function(){return this.type===Je.Number?this.numValue:-1},t.prototype.toString=function(){switch(this.type){case Je.Character:case Je.Identifier:case Je.Keyword:case Je.Operator:case Je.String:case Je.Error:return this.strValue;case Je.Number:return this.numValue.toString();default:return null}},t}();function rn(t,e){return new nn(t,Je.Character,e,String.fromCharCode(e))}function sn(t,e){return new nn(t,Je.Operator,0,e)}var on=new nn(-1,Je.Character,0,""),an=function(){function t(t){this.input=t,this.peek=0,this.index=-1,this.length=t.length,this.advance()}return t.prototype.advance=function(){this.peek=++this.index>=this.length?0:this.input.charCodeAt(this.index)},t.prototype.scanToken=function(){for(var t=this.input,e=this.length,n=this.peek,i=this.index;n<=M;){if(++i>=e){n=0;break}n=t.charCodeAt(i)}if(this.peek=n,e<=(this.index=i))return null;if(hn(n))return this.scanIdentifier();if(ut(n))return this.scanNumber(i);var r=i;switch(n){case 46:return this.advance(),ut(this.peek)?this.scanNumber(r):rn(r,46);case 40:case X:case rt:case st:case 91:case 93:case F:case 58:case 59:return this.scanCharacter(r,n);case U:case B:return this.scanString();case 35:case V:case q:case 42:case 47:case 37:case 94:return this.scanOperator(r,String.fromCharCode(n));case 63:return this.scanComplexOperator(r,"?",46,".");case 60:case 62:return this.scanComplexOperator(r,String.fromCharCode(n),61,"=");case 33:case 61:return this.scanComplexOperator(r,String.fromCharCode(n),61,"=",61,"=");case 38:return this.scanComplexOperator(r,"&",38,"&");case 124:return this.scanComplexOperator(r,"|",124,"|");case ot:for(;ht(this.peek);)this.advance();return this.scanToken()}return this.advance(),this.error("Unexpected character ["+String.fromCharCode(n)+"]",0)},t.prototype.scanCharacter=function(t,e){return this.advance(),rn(t,e)},t.prototype.scanOperator=function(t,e){return this.advance(),sn(t,e)},t.prototype.scanComplexOperator=function(t,e,n,i,r,s){this.advance();var o=e;return this.peek===n&&(this.advance(),o+=i),null!=r&&this.peek===r&&(this.advance(),o+=s),sn(t,o)},t.prototype.scanIdentifier=function(){var t=this.index;for(this.advance();un(this.peek);)this.advance();var e,n,i=this.input.substring(t,this.index);return-1<tn.indexOf(i)?(n=i,new nn(t,Je.Keyword,0,n)):(e=i,new nn(t,Je.Identifier,0,e))},t.prototype.scanNumber=function(t){var e,n,i=this.index===t;for(this.advance();;){if(ut(this.peek));else if(46===this.peek)i=!1;else{if((n=this.peek)!==$&&n!==W)break;if(this.advance(),((e=this.peek)===q||e===V)&&this.advance(),!ut(this.peek))return this.error("Invalid exponent",-1);i=!1}this.advance()}var r,s=this.input.substring(t,this.index),o=i?function(t){var e=parseInt(t,10);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}(s):parseFloat(s);return r=o,new nn(t,Je.Number,r,"")},t.prototype.scanString=function(){var t=this.index,e=this.peek;this.advance();for(var n="",i=this.index,r=this.input;this.peek!==e;)if(92===this.peek){n+=r.substring(i,this.index),this.advance();var s=void 0;if(this.peek=this.peek,117===this.peek){var o=r.substring(this.index+1,this.index+5);if(!/^[0-9a-f]+$/i.test(o))return this.error("Invalid unicode escape [\\u"+o+"]",0);s=parseInt(o,16);for(var a=0;a<5;a++)this.advance()}else s=pn(this.peek),this.advance();n+=String.fromCharCode(s),i=this.index}else{if(0===this.peek)return this.error("Unterminated quote",0);this.advance()}var h,u=r.substring(i,this.index);return this.advance(),h=n+u,new nn(t,Je.String,0,h)},t.prototype.error=function(t,e){var n,i,r=this.index+e;return i="Lexer Error: "+t+" at column "+(n=r)+" in expression ["+this.input+"]",new nn(n,Je.Error,0,i)},t}();function hn(t){return Q<=t&&t<=it||H<=t&&t<=z||t===Y||t===D}function un(t){return pt(t)||ut(t)||t===Y||t===D}function pn(t){switch(t){case J:return b;case Z:return R;case tt:return L;case et:return I;case nt:return O;default:return t}}var cn=function(t,e,n){this.strings=t,this.expressions=e,this.offsets=n},ln=function(t,e,n){this.templateBindings=t,this.warnings=e,this.errors=n};function dn(t){var e=N(t.start)+"([\\s\\S]*?)"+N(t.end);return new RegExp(e,"g")}var fn=function(){function t(t){this._lexer=t,this.errors=[]}return t.prototype.parseAction=function(t,e,n){void 0===n&&(n=P),this._checkNoInterpolation(t,e,n);var i=this._stripComments(t),r=this._lexer.tokenize(this._stripComments(t)),s=new _n(t,e,r,i.length,!0,this.errors,t.length-i.length).parseChain();return new $e(s,t,e,this.errors)},t.prototype.parseBinding=function(t,e,n){void 0===n&&(n=P);var i=this._parseBindingAst(t,e,n);return new $e(i,t,e,this.errors)},t.prototype.parseSimpleBinding=function(t,e,n){void 0===n&&(n=P);var i=this._parseBindingAst(t,e,n),r=vn.check(i);return 0<r.length&&this._reportError("Host binding expression cannot contain "+r.join(" "),t,e),new $e(i,t,e,this.errors)},t.prototype._reportError=function(t,e,n,i){this.errors.push(new ke(t,e,n,i))},t.prototype._parseBindingAst=function(t,e,n){var i=this._parseQuote(t,e);if(null!=i)return i;this._checkNoInterpolation(t,e,n);var r=this._stripComments(t),s=this._lexer.tokenize(r);return new _n(t,e,s,r.length,!1,this.errors,t.length-r.length).parseChain()},t.prototype._parseQuote=function(t,e){if(null===t)return null;var n=t.indexOf(":");if(-1===n)return null;var i=t.substring(0,n).trim();if(!function(t){if(0===t.length)return!1;var e=new an(t);if(!hn(e.peek))return!1;for(e.advance();0!==e.peek;){if(!un(e.peek))return!1;e.advance()}return!0}(i))return null;var r=t.substring(n+1);return new Ie(new Ne(0,t.length),i,r,e)},t.prototype.parseTemplateBindings=function(t,e,n){var i=this._lexer.tokenize(e);if(t){var r=this._lexer.tokenize(t).map(function(t){return t.index=0,t});i.unshift.apply(i,u(r))}return new _n(e,n,i,e.length,!1,this.errors,0).parseTemplateBindings()},t.prototype.parseInterpolation=function(t,e,n){void 0===n&&(n=P);var i=this.splitInterpolation(t,e,n);if(null===i)return null;for(var r=[],s=0;s<i.expressions.length;++s){var o=i.expressions[s],a=this._stripComments(o),h=this._lexer.tokenize(a),u=new _n(t,e,h,a.length,!1,this.errors,i.offsets[s]+(o.length-a.length)).parseChain();r.push(u)}return new $e(new je(new Ne(0,null===t?0:t.length),i.strings,r),t,e,this.errors)},t.prototype.splitInterpolation=function(t,e,n){void 0===n&&(n=P);var i=dn(n),r=t.split(i);if(r.length<=1)return null;for(var s=[],o=[],a=[],h=0,u=0;u<r.length;u++){var p=r[u];u%2==0?(s.push(p),h+=p.length):0<p.trim().length?(h+=n.start.length,o.push(p),a.push(h),h+=p.length+n.end.length):(this._reportError("Blank expressions are not allowed in interpolated strings",t,"at column "+this._findInterpolationErrorColumn(r,u,n)+" in",e),o.push("$implict"),a.push(h))}return new cn(s,o,a)},t.prototype.wrapLiteralPrimitive=function(t,e){return new $e(new Fe(new Ne(0,null===t?0:t.length),t),t,e,this.errors)},t.prototype._stripComments=function(t){var e=this._commentStart(t);return null!=e?t.substring(0,e).trim():t},t.prototype._commentStart=function(t){for(var e,n=null,i=0;i<t.length-1;i++){var r=t.charCodeAt(i),s=t.charCodeAt(i+1);if(47===r&&47===s&&null===n)return i;n===r?n=null:null===n&&((e=r)===U||e===B||e===at)&&(n=r)}return null},t.prototype._checkNoInterpolation=function(t,e,n){var i=dn(n),r=t.split(i);1<r.length&&this._reportError("Got interpolation ("+n.start+n.end+") where expression was expected",t,"at column "+this._findInterpolationErrorColumn(r,1,n)+" in",e)},t.prototype._findInterpolationErrorColumn=function(t,e,n){for(var i="",r=0;r<e;r++)i+=r%2==0?t[r]:""+n.start+t[r]+n.end;return i.length},t}(),_n=function(){function t(t,e,n,i,r,s,o){this.input=t,this.location=e,this.tokens=n,this.inputLength=i,this.parseAction=r,this.errors=s,this.offset=o,this.rparensExpected=0,this.rbracketsExpected=0,this.rbracesExpected=0,this.index=0}return t.prototype.peek=function(t){var e=this.index+t;return e<this.tokens.length?this.tokens[e]:on},Object.defineProperty(t.prototype,"next",{get:function(){return this.peek(0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputIndex",{get:function(){return this.index<this.tokens.length?this.next.index+this.offset:this.inputLength+this.offset},enumerable:!0,configurable:!0}),t.prototype.span=function(t){return new Ne(t,this.inputIndex)},t.prototype.advance=function(){this.index++},t.prototype.optionalCharacter=function(t){return!!this.next.isCharacter(t)&&(this.advance(),!0)},t.prototype.peekKeywordLet=function(){return this.next.isKeywordLet()},t.prototype.peekKeywordAs=function(){return this.next.isKeywordAs()},t.prototype.expectCharacter=function(t){this.optionalCharacter(t)||this.error("Missing expected "+String.fromCharCode(t))},t.prototype.optionalOperator=function(t){return!!this.next.isOperator(t)&&(this.advance(),!0)},t.prototype.expectOperator=function(t){this.optionalOperator(t)||this.error("Missing expected operator "+t)},t.prototype.expectIdentifierOrKeyword=function(){var t=this.next;return t.isIdentifier()||t.isKeyword()?(this.advance(),t.toString()):(this.error("Unexpected token "+t+", expected identifier or keyword"),"")},t.prototype.expectIdentifierOrKeywordOrString=function(){var t=this.next;return t.isIdentifier()||t.isKeyword()||t.isString()?(this.advance(),t.toString()):(this.error("Unexpected token "+t+", expected identifier, keyword, or string"),"")},t.prototype.parseChain=function(){for(var t=[],e=this.inputIndex;this.index<this.tokens.length;){var n=this.parsePipe();if(t.push(n),this.optionalCharacter(59))for(this.parseAction||this.error("Binding expression cannot contain chained expression");this.optionalCharacter(59););else this.index<this.tokens.length&&this.error("Unexpected token '"+this.next+"'")}return 0===t.length?new be(this.span(e)):1===t.length?t[0]:new Re(this.span(e),t)},t.prototype.parsePipe=function(){var t=this.parseExpression();if(this.optionalOperator("|")){this.parseAction&&this.error("Cannot have a pipe in an action expression");do{for(var e=this.expectIdentifierOrKeyword(),n=[];this.optionalCharacter(58);)n.push(this.parseExpression());t=new Ve(this.span(t.span.start),t,e,n)}while(this.optionalOperator("|"))}return t},t.prototype.parseExpression=function(){return this.parseConditional()},t.prototype.parseConditional=function(){var t=this.inputIndex,e=this.parseLogicalOr();if(this.optionalOperator("?")){var n=this.parsePipe(),i=void 0;if(this.optionalCharacter(58))i=this.parsePipe();else{var r=this.inputIndex,s=this.input.substring(t,r);this.error("Conditional expression "+s+" requires all 3 expressions"),i=new be(this.span(t))}return new Le(this.span(t),e,n,i)}return e},t.prototype.parseLogicalOr=function(){for(var t=this.parseLogicalAnd();this.optionalOperator("||");){var e=this.parseLogicalAnd();t=new He(this.span(t.span.start),"||",t,e)}return t},t.prototype.parseLogicalAnd=function(){for(var t=this.parseEquality();this.optionalOperator("&&");){var e=this.parseEquality();t=new He(this.span(t.span.start),"&&",t,e)}return t},t.prototype.parseEquality=function(){for(var t=this.parseRelational();this.next.type===Je.Operator;){var e=this.next.strValue;switch(e){case"==":case"===":case"!=":case"!==":this.advance();var n=this.parseRelational();t=new He(this.span(t.span.start),e,t,n);continue}break}return t},t.prototype.parseRelational=function(){for(var t=this.parseAdditive();this.next.type===Je.Operator;){var e=this.next.strValue;switch(e){case"<":case">":case"<=":case">=":this.advance();var n=this.parseAdditive();t=new He(this.span(t.span.start),e,t,n);continue}break}return t},t.prototype.parseAdditive=function(){for(var t=this.parseMultiplicative();this.next.type===Je.Operator;){var e=this.next.strValue;switch(e){case"+":case"-":this.advance();var n=this.parseMultiplicative();t=new He(this.span(t.span.start),e,t,n);continue}break}return t},t.prototype.parseMultiplicative=function(){for(var t=this.parsePrefix();this.next.type===Je.Operator;){var e=this.next.strValue;switch(e){case"*":case"%":case"/":this.advance();var n=this.parsePrefix();t=new He(this.span(t.span.start),e,t,n);continue}break}return t},t.prototype.parsePrefix=function(){if(this.next.type===Je.Operator){var t=this.inputIndex,e=this.next.strValue,n=void 0;switch(e){case"+":return this.advance(),this.parsePrefix();case"-":return this.advance(),n=this.parsePrefix(),new He(this.span(t),e,new Fe(new Ne(t,t),0),n);case"!":return this.advance(),n=this.parsePrefix(),new We(this.span(t),n)}}return this.parseCallChain()},t.prototype.parseCallChain=function(){for(var t=this.parsePrimary();;)if(this.optionalCharacter(46))t=this.parseAccessMemberOrMethodCall(t,!1);else if(this.optionalOperator("?."))t=this.parseAccessMemberOrMethodCall(t,!0);else if(this.optionalCharacter(91)){this.rbracketsExpected++;var e=this.parsePipe();if(this.rbracketsExpected--,this.expectCharacter(93),this.optionalOperator("=")){var n=this.parseConditional();t=new Xe(this.span(t.span.start),t,e,n)}else t=new Ue(this.span(t.span.start),t,e)}else if(this.optionalCharacter(40)){this.rparensExpected++;var i=this.parseCallArguments();this.rparensExpected--,this.expectCharacter(X),t=new Qe(this.span(t.span.start),t,i)}else{if(!this.optionalOperator("!"))return t;t=new Ge(this.span(t.span.start),t)}},t.prototype.parsePrimary=function(){var t=this.inputIndex;if(this.optionalCharacter(40)){this.rparensExpected++;var e=this.parsePipe();return this.rparensExpected--,this.expectCharacter(X),e}if(this.next.isKeywordNull())return this.advance(),new Fe(this.span(t),null);if(this.next.isKeywordUndefined())return this.advance(),new Fe(this.span(t),void 0);if(this.next.isKeywordTrue())return this.advance(),new Fe(this.span(t),!0);if(this.next.isKeywordFalse())return this.advance(),new Fe(this.span(t),!1);if(this.next.isKeywordThis())return this.advance(),new Oe(this.span(t));if(this.optionalCharacter(91)){this.rbracketsExpected++;var n=this.parseExpressionList(93);return this.rbracketsExpected--,this.expectCharacter(93),new qe(this.span(t),n)}if(this.next.isCharacter(rt))return this.parseLiteralMap();if(this.next.isIdentifier())return this.parseAccessMemberOrMethodCall(new Oe(this.span(t)),!1);if(this.next.isNumber()){var i=this.next.toNumber();return this.advance(),new Fe(this.span(t),i)}if(this.next.isString()){var r=this.next.toString();return this.advance(),new Fe(this.span(t),r)}return this.index>=this.tokens.length?this.error("Unexpected end of expression: "+this.input):this.error("Unexpected token "+this.next),new be(this.span(t))},t.prototype.parseExpressionList=function(t){var e=[];if(!this.next.isCharacter(t))for(;e.push(this.parsePipe()),this.optionalCharacter(F););return e},t.prototype.parseLiteralMap=function(){var t=[],e=[],n=this.inputIndex;if(this.expectCharacter(rt),!this.optionalCharacter(st)){this.rbracesExpected++;do{var i=this.next.isString(),r=this.expectIdentifierOrKeywordOrString();t.push({key:r,quoted:i}),this.expectCharacter(58),e.push(this.parsePipe())}while(this.optionalCharacter(F));this.rbracesExpected--,this.expectCharacter(st)}return new Ke(this.span(n),t,e)},t.prototype.parseAccessMemberOrMethodCall=function(t,e){void 0===e&&(e=!1);var n=t.span.start,i=this.expectIdentifierOrKeyword();if(this.optionalCharacter(40)){this.rparensExpected++;var r=this.parseCallArguments();this.expectCharacter(X),this.rparensExpected--;var s=this.span(n);return e?new Ye(s,t,i,r):new ze(s,t,i,r)}if(e)return this.optionalOperator("=")?(this.error("The '?.' operator cannot be used in the assignment"),new be(this.span(n))):new De(this.span(n),t,i);if(this.optionalOperator("=")){if(!this.parseAction)return this.error("Bindings cannot contain assignments"),new be(this.span(n));var o=this.parseConditional();return new Be(this.span(n),t,i,o)}return new Me(this.span(n),t,i)},t.prototype.parseCallArguments=function(){if(this.next.isCharacter(X))return[];for(var t=[];t.push(this.parsePipe()),this.optionalCharacter(F););return t},t.prototype.expectTemplateBindingKey=function(){for(var t="",e=!1;t+=this.expectIdentifierOrKeywordOrString(),(e=this.optionalOperator("-"))&&(t+="-"),e;);return t.toString()},t.prototype.parseTemplateBindings=function(){for(var t=[],e=null;this.index<this.tokens.length;){var n=this.inputIndex,i=this.peekKeywordLet();i&&this.advance();var r=this.expectTemplateBindingKey(),s=r;i||(null===e?e=s:s=e+s[0].toUpperCase()+s.substring(1)),this.optionalCharacter(58);var o=null,a=null;if(i)o=this.optionalOperator("=")?this.expectTemplateBindingKey():"$implicit";else if(this.peekKeywordAs()){var h=this.inputIndex;this.advance(),o=r,s=this.expectTemplateBindingKey(),i=!0}else if(this.next!==on&&!this.peekKeywordLet()){var u=this.inputIndex,p=this.parsePipe(),c=this.input.substring(u-this.offset,this.inputIndex-this.offset);a=new $e(p,c,this.location,this.errors)}if(t.push(new Ze(this.span(n),s,i,o,a)),this.peekKeywordAs()&&!i){h=this.inputIndex;this.advance();var l=this.expectTemplateBindingKey();t.push(new Ze(this.span(h),l,!0,s,null))}this.optionalCharacter(59)||this.optionalCharacter(F)}return new ln(t,[],this.errors)},t.prototype.error=function(t,e){void 0===e&&(e=null),this.errors.push(new ke(t,this.input,this.locationText(e),this.location)),this.skip()},t.prototype.locationText=function(t){return void 0===t&&(t=null),null===t&&(t=this.index),t<this.tokens.length?"at column "+(this.tokens[t].index+1)+" in":"at the end of the expression"},t.prototype.skip=function(){for(var t=this.next;this.index<this.tokens.length&&!t.isCharacter(59)&&(this.rparensExpected<=0||!t.isCharacter(X))&&(this.rbracesExpected<=0||!t.isCharacter(st))&&(this.rbracketsExpected<=0||!t.isCharacter(93));)this.next.isError()&&this.errors.push(new ke(this.next.toString(),this.input,this.locationText(),this.location)),this.advance(),t=this.next},t}(),vn=function(){function n(){this.errors=[]}return n.check=function(t){var e=new n;return t.visit(e),e.errors},n.prototype.visitImplicitReceiver=function(t,e){},n.prototype.visitInterpolation=function(t,e){},n.prototype.visitLiteralPrimitive=function(t,e){},n.prototype.visitPropertyRead=function(t,e){},n.prototype.visitPropertyWrite=function(t,e){},n.prototype.visitSafePropertyRead=function(t,e){},n.prototype.visitMethodCall=function(t,e){},n.prototype.visitSafeMethodCall=function(t,e){},n.prototype.visitFunctionCall=function(t,e){},n.prototype.visitLiteralArray=function(t,e){this.visitAll(t.expressions)},n.prototype.visitLiteralMap=function(t,e){this.visitAll(t.values)},n.prototype.visitBinary=function(t,e){},n.prototype.visitPrefixNot=function(t,e){},n.prototype.visitNonNullAssert=function(t,e){},n.prototype.visitConditional=function(t,e){},n.prototype.visitPipe=function(t,e){this.errors.push("pipes")},n.prototype.visitKeyedRead=function(t,e){},n.prototype.visitKeyedWrite=function(t,e){},n.prototype.visitAll=function(t){var e=this;return t.map(function(t){return t.visit(e)})},n.prototype.visitChain=function(t,e){},n.prototype.visitQuote=function(t,e){},n}(),gn={A:"LINK",B:"BOLD_TEXT",BR:"LINE_BREAK",EM:"EMPHASISED_TEXT",H1:"HEADING_LEVEL1",H2:"HEADING_LEVEL2",H3:"HEADING_LEVEL3",H4:"HEADING_LEVEL4",H5:"HEADING_LEVEL5",H6:"HEADING_LEVEL6",HR:"HORIZONTAL_RULE",I:"ITALIC_TEXT",LI:"LIST_ITEM",LINK:"MEDIA_LINK",OL:"ORDERED_LIST",P:"PARAGRAPH",Q:"QUOTATION",S:"STRIKETHROUGH_TEXT",SMALL:"SMALL_TEXT",SUB:"SUBSTRIPT",SUP:"SUPERSCRIPT",TBODY:"TABLE_BODY",TD:"TABLE_CELL",TFOOT:"TABLE_FOOTER",TH:"TABLE_HEADER_CELL",THEAD:"TABLE_HEADER",TR:"TABLE_ROW",TT:"MONOSPACED_TEXT",U:"UNDERLINED_TEXT",UL:"UNORDERED_LIST"},mn=function(){function t(){this._placeHolderNameCounts={},this._signatureToName={}}return t.prototype.getStartTagPlaceholderName=function(t,e,n){var i=this._hashTag(t,e,n);if(this._signatureToName[i])return this._signatureToName[i];var r=t.toUpperCase(),s=gn[r]||"TAG_"+r,o=this._generateUniqueName(n?s:"START_"+s);return this._signatureToName[i]=o},t.prototype.getCloseTagPlaceholderName=function(t){var e=this._hashClosingTag(t);if(this._signatureToName[e])return this._signatureToName[e];var n=t.toUpperCase(),i=gn[n]||"TAG_"+n,r=this._generateUniqueName("CLOSE_"+i);return this._signatureToName[e]=r},t.prototype.getPlaceholderName=function(t,e){var n=t.toUpperCase(),i="PH: "+n+"="+e;if(this._signatureToName[i])return this._signatureToName[i];var r=this._generateUniqueName(n);return this._signatureToName[i]=r},t.prototype.getUniquePlaceholder=function(t){return this._generateUniqueName(t.toUpperCase())},t.prototype._hashTag=function(t,e,n){return"<"+t+Object.keys(e).sort().map(function(t){return" "+t+"="+e[t]}).join("")+(n?"/>":"></"+t+">")},t.prototype._hashClosingTag=function(t){return this._hashTag("/"+t,{},!1)},t.prototype._generateUniqueName=function(t){if(!this._placeHolderNameCounts.hasOwnProperty(t))return this._placeHolderNameCounts[t]=1,t;var e=this._placeHolderNameCounts[t];return this._placeHolderNameCounts[t]=e+1,t+"_"+e},t}(),yn=new fn(new en);var Tn=function(){function h(t,e){this._expressionParser=t,this._interpolationConfig=e}return h.prototype.toI18nMessage=function(t,e,n,i){this._isIcu=1===t.length&&t[0]instanceof p,this._icuDepth=0,this._placeholderRegistry=new mn,this._placeholderToContent={},this._placeholderToMessage={};var r=d(this,t,{});return new f(r,this._placeholderToContent,this._placeholderToMessage,e,n,i)},h.prototype.visitElement=function(t,e){var n=d(this,t.children),i={};t.attrs.forEach(function(t){i[t.name]=t.value});var r=Ft(t.name).isVoid,s=this._placeholderRegistry.getStartTagPlaceholderName(t.name,i,r);this._placeholderToContent[s]=t.sourceSpan?t.sourceSpan.toString():"";var o="";return r||(o=this._placeholderRegistry.getCloseTagPlaceholderName(t.name),this._placeholderToContent[o]="</"+t.name+">"),new m(t.name,i,s,o,n,r,t.sourceSpan)},h.prototype.visitAttribute=function(t,e){return this._visitTextWithInterpolation(t.value,t.sourceSpan)},h.prototype.visitText=function(t,e){return this._visitTextWithInterpolation(t.value,t.sourceSpan)},h.prototype.visitComment=function(t,e){return null},h.prototype.visitExpansion=function(t,e){var n=this;this._icuDepth++;var i={},r=new g(t.switchValue,t.type,i,t.sourceSpan);if(t.cases.forEach(function(t){i[t.value]=new v(t.expression.map(function(t){return t.visit(n,{})}),t.expSourceSpan)}),this._icuDepth--,this._isIcu||0<this._icuDepth){var s=this._placeholderRegistry.getUniquePlaceholder("VAR_"+t.type);return r.expressionPlaceholder=s,this._placeholderToContent[s]=t.switchValue,r}var o=this._placeholderRegistry.getPlaceholderName("ICU",t.sourceSpan.toString()),a=new h(this._expressionParser,this._interpolationConfig);return this._placeholderToMessage[o]=a.toI18nMessage([t],"","",""),new T(r,o,t.sourceSpan)},h.prototype.visitExpansionCase=function(t,e){throw new Error("Unreachable code")},h.prototype._visitTextWithInterpolation=function(t,e){var n=this._expressionParser.splitInterpolation(t,e.start.toString(),this._interpolationConfig);if(!n)return new _(t,e);for(var i=[],r=new v(i,e),s=this._interpolationConfig,o=s.start,a=s.end,h=0;h<n.strings.length-1;h++){var u=n.expressions[h],p=u.split(En)[2]||"INTERPOLATION",c=this._placeholderRegistry.getPlaceholderName(p,u);n.strings[h].length&&i.push(new _(n.strings[h],e)),i.push(new y(u,c,e)),this._placeholderToContent[c]=o+u+a}var l=n.strings.length-1;return n.strings[l].length&&i.push(new _(n.strings[l],e)),r},h}(),En=/\/\/[\s\S]*i18n[\s\S]*\([\s\S]*ph[\s\S]*=[\s\S]*("|')([\s\S]*?)\1[\s\S]*\)/g;var Cn=function(i){function t(t){void 0===t&&(t=P);var e=i.call(this,Ft)||this;return e.interpolationConfig=t,e}return o(t,i),t.prototype.parse=function(t,e,n){return void 0===n&&(n=!1),i.prototype.parse.call(this,t,e,n,this.interpolationConfig)},t.prototype.extractMessages=function(t){var e=new kn(["wrapper"]),n=new l("wrapper",[],t,undefined,undefined,undefined);return e.extract(n,this.interpolationConfig)},t.prototype.mergeTranslations=function(t,e,n,i,r){void 0===r&&(r=[]);var s=new kn(r),o=new l("wrapper",[],t,undefined,undefined,undefined);return s.merge(o,e,this.interpolationConfig,n,i)},t}(Rt),Sn=function(t,e){this.messages=t,this.errors=e},xn=function(){function a(t,e,n,i,r,s){void 0===t&&(t={}),this.i18nNodesByMsgId=t,this.digest=e,this.mapperFactory=r,this.i18nToHtml=new wn(t,e,r,i,n,s)}return a.load=function(t,e,n,i,r,s,o){void 0===o&&(o=P);return new a(r(t,e),function(t){return n(t)},o,s,function(t){return i(t)},console)},a.prototype.get=function(t,e){var n=this.i18nToHtml.convert(t,e);if(n.errors.length)throw new Error(n.errors.join("\n"));return n.nodes},a.prototype.has=function(t){return this.digest(t)in this.i18nNodesByMsgId},a}(),wn=function(){function t(t,e,n,i,r,s){void 0===t&&(t={}),this._i18nNodesByMsgId=t,this._digest=e,this._mapperFactory=n,this._missingTranslationStrategy=i,this._interpolationConfig=r,this._console=s,this._contextStack=[],this._errors=[]}return t.prototype.convert=function(t,e){this._contextStack.length=0,this._errors.length=0,this._params=e,this._paramKeys=Object.keys(e);var n=this.convertToText(t),i=t.nodes[0].sourceSpan.start.file.url,r=(new Cn).parse(n,i,!0);return{nodes:r.rootNodes,errors:u(this._errors,r.errors)}},t.prototype.visitText=function(t,e){return t.value},t.prototype.visitContainer=function(t,e){var n=this;return t.children.map(function(t){return t.visit(n)}).join("")},t.prototype.visitIcu=function(e,t){var n=this,i=Object.keys(e.cases).map(function(t){return t+" {"+e.cases[t].visit(n)+"}"});return"{"+(this._srcMsg.placeholders.hasOwnProperty(e.expression)?this._srcMsg.placeholders[e.expression]:e.expression)+", "+e.type+", "+i.join(" ")+"}"},t.prototype.visitPlaceholder=function(t,e){var n=this._mapper(t.name);return this._srcMsg.placeholders.hasOwnProperty(n)?this.convertToValue(this._srcMsg.placeholders[n]):this._srcMsg.placeholderToMessage.hasOwnProperty(n)?this.convertToText(this._srcMsg.placeholderToMessage[n]):(this._addError(t,'Unknown placeholder "'+t.name+'"'),"")},t.prototype.visitTagPlaceholder=function(e,t){var n=this,i=""+e.tag,r=Object.keys(e.attrs).map(function(t){return t+'="'+e.attrs[t]+'"'}).join(" ");return e.isVoid?"<"+i+" "+r+"/>":"<"+i+" "+r+">"+e.children.map(function(t){return t.visit(n)}).join("")+"</"+i+">"},t.prototype.visitIcuPlaceholder=function(t,e){return this.convertToText(this._srcMsg.placeholderToMessage[t.name])},t.prototype.convertToText=function(t){var e,n=this,i=this._digest(t),r=this._mapperFactory?this._mapperFactory(t):null;this._contextStack.push({msg:this._srcMsg,mapper:this._mapper}),this._srcMsg=t,this._i18nNodesByMsgId.hasOwnProperty(i)?(e=this._i18nNodesByMsgId[i],this._mapper=function(t){return r?r.toInternalName(t):t}):(this._missingTranslationStrategy===a.MissingTranslationStrategy.Error?this._addError(t.nodes[0],'Missing translation for message "'+i+'"'):this._console&&this._missingTranslationStrategy===a.MissingTranslationStrategy.Warning&&this._console.warn('Missing translation for message "'+i+'"'),e=t.nodes,this._mapper=function(t){return t});var s=e.map(function(t){return t.visit(n)}).join(""),o=this._contextStack.pop();return this._srcMsg=o.msg,this._mapper=o.mapper,s},t.prototype.convertToValue=function(t){var e=t.replace(this._interpolationConfig.start,"").replace(this._interpolationConfig.end,"");return-1!==this._paramKeys.indexOf(e)?this._params[e]:t},t.prototype._addError=function(t,e){this._errors.push(new k(t.sourceSpan,e))},t}(),An={Extract:0,Merge:1};An[An.Extract]="Extract",An[An.Merge]="Merge";var kn=function(){function t(t){void 0===t&&(t=[]),this._implicitTags=t,this.blockChildren=[]}return t.prototype.extract=function(t,e){return this.init(An.Extract,e),t.visit(this,null),this.inI18nBlock&&this._reportError(t,"Unclosed block"),new Sn(this.messages,this.errors)},t.prototype.merge=function(t,e,n,i,r){void 0===r&&(r={}),this.init(An.Merge,n,i),this.translations=e,this.metadata=r;var s=t.visit(this,null);return this.inI18nBlock&&this._reportError(t,"Unclosed block"),new Ot(s.children,this.errors)},t.prototype.visitExpansionCase=function(t,e){var n=d(this,t.expression,e);if(this.mode===An.Merge)return new h(t.value,n,t.sourceSpan,t.valueSourceSpan,t.expSourceSpan)},t.prototype.visitExpansion=function(t,e){this.mayBeAddBlockChildren(t);var n=this.inIcu;this.inIcu||(this.isInTranslatableSection&&this.addMessage([t]),this.inIcu=!0);var i=d(this,t.cases,e);return this.mode===An.Merge&&(t=new p(t.switchValue,t.type,i,t.sourceSpan,t.switchValueSourceSpan)),this.inIcu=n,t},t.prototype.visitComment=function(t,e){},t.prototype.visitText=function(t,e){return this.isInTranslatableSection&&this.mayBeAddBlockChildren(t),t},t.prototype.visitElement=function(e,n){var i=this;this.mayBeAddBlockChildren(e),this.depth++;var t=this.inI18nNode,r=this.inImplicitNode,s=[],o=undefined,a=e.attrs.find(function(t){return"i18n"===t.name})||null,h=this._implicitTags.some(function(t){return e.name===t})&&!this.inIcu&&!this.isInTranslatableSection,u=!r&&h;if(this.inImplicitNode=r||h,this.isInTranslatableSection||this.inIcu)(a||u)&&this._reportError(e,"Could not mark an element as translatable inside a translatable section"),this.mode===An.Extract&&d(this,e.children);else{if(a||u){this.inI18nNode=!0;var p=this.addMessage(e.children,this.metadata);o=this.translateMessage(e,p)}if(this.mode===An.Extract){var c=a||u;c&&this.openTranslatableSection(e),d(this,e.children),c&&this._closeTranslatableSection(e,e.children)}}this.mode===An.Merge&&(o||e.children).forEach(function(t){var e=t.visit(i,n);e&&!i.isInTranslatableSection&&(s=s.concat(e))});return this.depth--,this.inI18nNode=t,this.inImplicitNode=r,this.mode===An.Merge?new l(e.name,[],s,e.sourceSpan,e.startSourceSpan,e.endSourceSpan):null},t.prototype.visitAttribute=function(t,e){throw new Error("unreachable code")},t.prototype.init=function(t,e,n){var r;void 0===n&&(n={}),this.mode=t,this.inI18nBlock=!1,this.inI18nNode=!1,this.depth=0,this.inIcu=!1,this.msgCountAtSectionStart=undefined,this.errors=[],this.messages=[],this.inImplicitNode=!1,this.createI18nMessage=(r=new Tn(yn,e),function(t,e,n,i){return r.toI18nMessage(t,e,n,i)}),this.params=n},t.prototype.addMessage=function(t,e){var n=void 0===e?{}:e,i=n.meaning,r=void 0===i?"":i,s=n.description,o=void 0===s?"":s,a=n.id,h=void 0===a?"":a;if(0===t.length||1===t.length&&t[0]instanceof c&&!t[0].value)return null;var u=this.createI18nMessage(t,r,o,h);return this.messages.push(u),u},t.prototype.translateMessage=function(t,e){if(e&&this.mode===An.Merge){var n=this.translations.get(e,this.params);if(n)return n;this._reportError(t,'Translation unavailable for message id="'+this.translations.digest(e)+'"')}return[]},t.prototype.mayBeAddBlockChildren=function(t){this.inI18nBlock&&!this.inIcu&&this.depth===this.blockStartDepth&&this.blockChildren.push(t)},t.prototype.openTranslatableSection=function(t){this.isInTranslatableSection?this._reportError(t,"Unexpected section start"):this.msgCountAtSectionStart=this.messages.length},Object.defineProperty(t.prototype,"isInTranslatableSection",{get:function(){return void 0!==this.msgCountAtSectionStart},enumerable:!0,configurable:!0}),t.prototype._closeTranslatableSection=function(t,e){if(this.isInTranslatableSection){var n=this.msgCountAtSectionStart;if(1===e.reduce(function(t,e){return t+(e instanceof s?0:1)},0))for(var i=this.messages.length-1;n<=i;i--){var r=this.messages[i].nodes;if(!(1===r.length&&r[0]instanceof _)){this.messages.splice(i,1);break}}this.msgCountAtSectionStart=undefined}else this._reportError(t,"Unexpected section end")},t.prototype._reportError=function(t,e){this.errors.push(new k(t.sourceSpan,e))},t}();var Nn=new a.InjectionToken("MissingTranslationStrategy"),Pn=function(){function t(t,e,u,n){var i,r;void 0===n&&(n=a.MissingTranslationStrategy.Warning);var s=function(t){return null};switch(t=(t||"xlf").toLowerCase()){case"xtb":i=Ce,r=Se,s=xe;break;case"xliff2":case"xlf2":i=_e,r=ve;break;case"xliff":case"xlf":i=ce,r=le;break;default:throw new Error("Unknown translations format "+t)}var p=new Cn,c=xn.load(e,"i18n",r,s,i,n);return function(t,e){void 0===e&&(e={});var n="string"==typeof t?t:t.value,i={};"object"==typeof t&&(i.id=t.id,i.meaning=t.meaning,i.description=t.description);var r=p.parse(n,"",!0);if(r.errors.length)throw r.errors;var s,o,a,h=p.mergeTranslations(r.rootNodes,c,e,i,["wrapper"]);return(s=h.rootNodes,o=u,a=e,s.map(function(t){return t.visit(new jt(o,a),null)})).join("")}}return t.decorators=[{type:a.Injectable}],t.ctorParameters=function(){return[{type:undefined,decorators:[{type:a.Inject,args:[a.TRANSLATIONS_FORMAT]}]},{type:undefined,decorators:[{type:a.Inject,args:[a.TRANSLATIONS]}]},{type:undefined,decorators:[{type:a.Inject,args:[a.LOCALE_ID]}]},{type:a.MissingTranslationStrategy,decorators:[{type:a.Optional},{type:a.Inject,args:[Nn]}]}]},t}();t.I18n=Pn,t.MISSING_TRANSLATION_STRATEGY=Nn,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-translate-i18n-polyfill.umd.min.js.map